<!DOCTYPE html><html lang="es"><head><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Argentina: Aventura Familiar de 30 D√≠as</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIkFyZ2VudGluYTogQXZlbnR1cmEgRmFtaWxpYXIiLAogICJzaG9ydF9uYW1lIjogIkFyZ2VudGluYSBBdmVudHVyYSIsCiAgInN0YXJ0X3VybCI6ICIvIiwKICAiZGlzcGxheSI6ICJzdGFuZGFsb25lIiwKICAiYmFja2dyb3VuZF9jb2xvciI6ICIjZmZmZmZmIiwKICAidGhlbWVfY29sb3IiOiAiIzVENUNERSIsCiAgImljb25zIjogW10KfQ==">
    <style>
        :root {
            --primary-color: #5D5CDE;
            --primary-dark: #4a49b0;
            --bg-light: #FFFFFF;
            --bg-dark: #181818;
            --text-light: #333333;
            --text-dark: #F5F5F5;
        }
        
        html.dark {
            --bg-color: var(--bg-dark);
            --text-color: var(--text-dark);
        }
        
        html:not(.dark) {
            --bg-color: var(--bg-light);
            --text-color: var(--text-light);
        }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
        }
        
        .city-card {
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .city-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        .hidden-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
        }
        
        .expanded .hidden-content {
            max-height: 2000px;
        }
        
        .offline-notification {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 9999;
        }
        
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="min-h-screen">
    <div id="offline-notification" class="offline-notification bg-yellow-500 text-white px-4 py-2 rounded shadow-lg">
        <p><i class="fas fa-exclamation-triangle mr-2"></i> Modo sin conexi√≥n activo</p>
    </div>

    <header class="bg-primary-500 text-white shadow-md">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <img id="logo" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiBmaWxsPSIjNUQ1Q0RFIi8+CjxwYXRoIGQ9Ik0xMCAxNUg0MFY0MEgxMFYxNVoiIGZpbGw9IiNGRkYiLz4KPHJlY3QgeD0iMTUiIHk9IjIwIiB3aWR0aD0iMjAiIGhlaWdodD0iNSIgZmlsbD0iIzc1QkJGRCIvPgo8cmVjdCB4PSIxNSIgeT0iMzAiIHdpZHRoPSIyMCIgaGVpZ2h0PSI1IiBmaWxsPSIjNzVCQkZEIi8+Cjwvc3ZnPgo=" alt="Logo" class="h-8 w-8">
                <h1 class="text-xl sm:text-2xl font-bold">Argentina Aventura Familiar</h1>
            </div>
            <div class="flex items-center space-x-4">
                <button id="language-toggle" class="bg-white bg-opacity-20 px-3 py-1 rounded hover:bg-opacity-30">
                    <span id="current-lang">ES</span>
                </button>
                <button id="theme-toggle" class="bg-white bg-opacity-20 px-3 py-1 rounded hover:bg-opacity-30">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-6">
        <section id="intro" class="mb-8">
            <h2 class="text-2xl font-bold mb-4" data-i18n="intro.title">üá¶üá∑ Argentina: Aventura Familiar de 30 D√≠as (Itinerario V4.0)</h2>
            <div class="bg-primary-100 dark:bg-gray-800 p-4 rounded-lg shadow">
                <h3 class="font-bold mb-2" data-i18n="intro.important">üìù Notas Generales Importantes</h3>
                <div class="space-y-4">
                    <div>
                        <h4 class="font-semibold" data-i18n="intro.currency.title">üí∞ Moneda y Cambio</h4>
                        <p data-i18n="intro.currency.main">La moneda oficial es el Peso Argentino ($ARS).</p>
                        <p class="font-bold" data-i18n="intro.currency.important">IMPORTANTE:</p>
                        <p data-i18n="intro.currency.situation">La situaci√≥n cambiaria en Argentina es vol√°til. Existen diferentes tipos de cambio (oficial, MEP, "Blue"). Inf√≥rmate bien justo antes de viajar sobre la mejor y m√°s segura forma de cambiar dinero o pagar.</p>
                    </div>
                    
                    <div>
                        <h4 class="font-semibold" data-i18n="intro.health.title">ü©∫ Salud General y para Viajeros Diab√©ticos</h4>
                        <p><strong data-i18n="intro.health.insurance">Seguro de Viaje:</strong> <span data-i18n="intro.health.insurance.desc">Indispensable que cubra gastos m√©dicos mayores.</span></p>
                        <p><strong data-i18n="intro.health.emergency">Tel√©fonos de Urgencia Nacional:</strong> <span data-i18n="intro.health.emergency.numbers">107 (Ambulancia), 911 (Emergencias Generales).</span></p>
                    </div>
                </div>
            </div>
        </section>

        <section id="itinerary" class="mb-8">
            <h2 class="text-2xl font-bold mb-4" data-i18n="itinerary.title">üìç Itinerario Detallado</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Buenos Aires -->
                <div class="city-card bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden">
                    <div class="city-image h-48 bg-gray-300 relative">
                        <div class="absolute inset-0 flex items-center justify-center">
                            <canvas id="ba-canvas" width="400" height="192" class="w-full h-full"></canvas>
                        </div>
                    </div>
                    <div class="p-4">
                        <h3 class="text-xl font-bold mb-2" data-i18n="cities.ba.title">üá¶üá∑ Buenos Aires</h3>
                        <p class="mb-2" data-i18n="cities.ba.days">D√≠as 1-4 / Noches 1-3</p>
                        <button class="toggle-details w-full bg-primary-500 text-white py-2 rounded hover:bg-primary-600 transition duration-300" data-target="ba-details">
                            <span data-i18n="buttons.details">Ver detalles</span>
                        </button>
                        
                        <div id="ba-details" class="hidden-content mt-4">
                            <div class="mb-3">
                                <h4 class="font-semibold" data-i18n="cities.ba.dates">üóìÔ∏è Fechas Estimadas:</h4>
                                <p data-i18n="cities.ba.dates.value">28 Sept - 01 Oct 2025</p>
                            </div>
                            
                            <div class="mb-3">
                                <h4 class="font-semibold" data-i18n="cities.ba.transport">‚úàÔ∏è Transporte:</h4>
                                <p data-i18n="cities.ba.transport.details">Llegada Aeropuerto Internacional de Ezeiza (EZE). Traslado a alojamiento.</p>
                            </div>
                            
                            <div class="mb-3">
                                <h4 class="font-semibold" data-i18n="cities.ba.activities">üéØ Actividades:</h4>
                                <ul class="list-disc pl-5">
                                    <li data-i18n="cities.ba.day1">D√≠a 1: Instalaci√≥n. Paseo por Palermo (Rosedal, Jard√≠n Japon√©s).</li>
                                    <li data-i18n="cities.ba.day2">D√≠a 2: Plaza de Mayo, Cementerio de Recoleta, Museo Prohibido No Tocar.</li>
                                    <li data-i18n="cities.ba.day3">D√≠a 3: La Boca (Caminito), San Telmo (Mercado, Plaza Dorrego).</li>
                                </ul>
                            </div>
                            
                            <div class="mb-3">
                                <h4 class="font-semibold" data-i18n="cities.ba.accommodation">üõèÔ∏è Alojamientos:</h4>
                                <p data-i18n="cities.ba.accommodation.details">Apartamentos en Palermo, Recoleta o Villa Crespo.</p>
                            </div>
                            
                            <div class="mb-3">
                                <h4 class="font-semibold" data-i18n="cities.ba.restaurants">üçΩÔ∏è Restaurantes:</h4>
                                <p data-i18n="cities.ba.restaurants.details">Sintaxis Palermo (Sin TACC), Buenos Aires Verde (Saludable), Don Julio (Parrilla).</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Rosario -->
                <div class="city-card bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden">
                    <div class="city-image h-48 bg-gray-300 relative">
                        <div class="absolute inset-0 flex items-center justify-center">
                            <canvas id="rosario-canvas" width="400" height="192" class="w-full h-full"></canvas>
                        </div>
                    </div>
                    <div class="p-4">
                        <h3 class="text-xl font-bold mb-2" data-i18n="cities.rosario.title">üá¶üá∑ Rosario</h3>
                        <p class="mb-2" data-i18n="cities.rosario.days">D√≠as 4-6 / Noches 4-5</p>
                        <button class="toggle-details w-full bg-primary-500 text-white py-2 rounded hover:bg-primary-600 transition duration-300" data-target="rosario-details">
                            <span data-i18n="buttons.details">Ver detalles</span>
                        </button>
                        
                        <div id="rosario-details" class="hidden-content mt-4">
                            <div class="mb-3">
                                <h4 class="font-semibold" data-i18n="cities.rosario.dates">üóìÔ∏è Fechas Estimadas:</h4>
                                <p data-i18n="cities.rosario.dates.value">01 Oct - 03 Oct 2025</p>
                            </div>
                            
                            <div class="mb-3">
                                <h4 class="font-semibold" data-i18n="cities.rosario.transport">‚úàÔ∏è Transporte:</h4>
                                <p data-i18n="cities.rosario.transport.details">Vuelo Buenos Aires (AEP) -&gt; Rosario (ROS).</p>
                            </div>
                            
                            <div class="mb-3">
                                <h4 class="font-semibold" data-i18n="cities.rosario.activities">üéØ Actividades:</h4>
                                <ul class="list-disc pl-5">
                                    <li data-i18n="cities.rosario.day1">D√≠a 4: Costanera Central, Monumento Nacional a la Bandera.</li>
                                    <li data-i18n="cities.rosario.day2">D√≠a 5: Parque de la Independencia, Boulevard Oro√±o.</li>
                                </ul>
                            </div>
                            
                            <div class="mb-3">
                                <h4 class="font-semibold" data-i18n="cities.rosario.accommodation">üõèÔ∏è Alojamientos:</h4>
                                <p data-i18n="cities.rosario.accommodation.details">Apartamentos c√©ntricos o cerca del r√≠o (Pichincha).</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Bariloche -->
                <div class="city-card bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden">
                    <div class="city-image h-48 bg-gray-300 relative">
                        <div class="absolute inset-0 flex items-center justify-center">
                            <canvas id="bariloche-canvas" width="400" height="192" class="w-full h-full"></canvas>
                        </div>
                    </div>
                    <div class="p-4">
                        <h3 class="text-xl font-bold mb-2" data-i18n="cities.bariloche.title">üá¶üá∑ Bariloche</h3>
                        <p class="mb-2" data-i18n="cities.bariloche.days">D√≠as 6-10 / Noches 6-9</p>
                        <button class="toggle-details w-full bg-primary-500 text-white py-2 rounded hover:bg-primary-600 transition duration-300" data-target="bariloche-details">
                            <span data-i18n="buttons.details">Ver detalles</span>
                        </button>
                        
                        <div id="bariloche-details" class="hidden-content mt-4">
                            <div class="mb-3">
                                <h4 class="font-semibold" data-i18n="cities.bariloche.dates">üóìÔ∏è Fechas Estimadas:</h4>
                                <p data-i18n="cities.bariloche.dates.value">03 Oct - 07 Oct 2025</p>
                            </div>
                            
                            <div class="mb-3">
                                <h4 class="font-semibold" data-i18n="cities.bariloche.transport">‚úàÔ∏è Transporte:</h4>
                                <p data-i18n="cities.bariloche.transport.details">Vuelo Rosario (ROS) -&gt; Bariloche (BRC). Recomendable alquilar coche.</p>
                            </div>
                            
                            <div class="mb-3">
                                <h4 class="font-semibold" data-i18n="cities.bariloche.activities">üéØ Actividades:</h4>
                                <ul class="list-disc pl-5">
                                    <li data-i18n="cities.bariloche.day1">D√≠a 6: Centro C√≠vico, costa Lago Nahuel Huapi. Chocolater√≠as.</li>
                                    <li data-i18n="cities.bariloche.day2">D√≠a 7: Circuito Chico (Cerro Campanario, Llao Llao).</li>
                                    <li data-i18n="cities.bariloche.day3">D√≠a 8: Navegaci√≥n Isla Victoria/Bosque de Arrayanes.</li>
                                    <li data-i18n="cities.bariloche.day4">D√≠a 9: Trekking ligero o d√≠a libre.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- M√°s ciudades se cargar√°n bajo demanda -->
            </div>
            
            <div class="mt-6 text-center">
                <button id="load-more" class="bg-primary-500 text-white px-6 py-2 rounded-full hover:bg-primary-600 transition duration-300">
                    <span data-i18n="buttons.loadMore">Cargar m√°s ciudades</span>
                    <div class="loading-spinner hidden ml-2"></div>
                </button>
            </div>
        </section>
        
        <section id="travel-tools" class="mb-8">
            <h2 class="text-2xl font-bold mb-4" data-i18n="tools.title">üß∞ Herramientas de Viaje</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Conversor de moneda -->
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4">
                    <h3 class="text-xl font-bold mb-3" data-i18n="tools.currency.title">üí∞ Conversor de Moneda</h3>
                    <div class="space-y-4">
                        <div>
                            <label for="amount" class="block mb-1" data-i18n="tools.currency.amount">Cantidad:</label>
                            <input type="number" id="amount" class="w-full px-3 py-2 border rounded text-base" value="100">
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="from-currency" class="block mb-1" data-i18n="tools.currency.from">De:</label>
                                <select id="from-currency" class="w-full px-3 py-2 border rounded text-base">
                                    <option value="USD">USD (D√≥lar US)</option>
                                    <option value="EUR">EUR (Euro)</option>
                                    <option value="ILS">ILS (Shekel)</option>
                                    <option value="ARS">ARS (Peso Argentino)</option>
                                </select>
                            </div>
                            <div>
                                <label for="to-currency" class="block mb-1" data-i18n="tools.currency.to">A:</label>
                                <select id="to-currency" class="w-full px-3 py-2 border rounded text-base">
                                    <option value="ARS">ARS (Peso Argentino)</option>
                                    <option value="USD">USD (D√≥lar US)</option>
                                    <option value="EUR">EUR (Euro)</option>
                                    <option value="ILS">ILS (Shekel)</option>
                                </select>
                            </div>
                        </div>
                        <div>
                            <button id="convert-btn" class="w-full bg-primary-500 text-white py-2 rounded hover:bg-primary-600 transition duration-300">
                                <span data-i18n="tools.currency.convert">Convertir</span>
                            </button>
                        </div>
                        <div id="conversion-result" class="mt-3 text-center font-bold"></div>
                        <div class="text-sm text-gray-500 dark:text-gray-400">
                            <p data-i18n="tools.currency.disclaimer">Nota: Tipos de cambio aproximados. Los valores exactos pueden variar.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Lista de equipaje -->
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4">
                    <h3 class="text-xl font-bold mb-3" data-i18n="tools.packing.title">üß≥ Lista de Equipaje</h3>
                    <div class="space-y-4">
                        <div class="flex items-center space-x-2">
                            <input type="text" id="packing-item" class="flex-grow px-3 py-2 border rounded text-base" placeholder="Agregar item...">
                            <button id="add-item" class="bg-primary-500 text-white px-4 py-2 rounded hover:bg-primary-600 transition duration-300">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold mb-2" data-i18n="tools.packing.essential">Esenciales:</h4>
                            <ul id="packing-list" class="space-y-2">
                                <li class="flex items-center">
                                    <input type="checkbox" id="item-passport" class="mr-2">
                                    <label for="item-passport" data-i18n="tools.packing.passport">Pasaporte y documentos</label>
                                </li>
                                <li class="flex items-center">
                                    <input type="checkbox" id="item-insurance" class="mr-2">
                                    <label for="item-insurance" data-i18n="tools.packing.insurance">Seguro de viaje</label>
                                </li>
                                <li class="flex items-center">
                                    <input type="checkbox" id="item-medication" class="mr-2">
                                    <label for="item-medication" data-i18n="tools.packing.medication">Medicamentos</label>
                                </li>
                            </ul>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold mb-2" data-i18n="tools.packing.custom">Mis items:</h4>
                            <ul id="custom-packing-list" class="space-y-2"></ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="askAi" class="mb-8">
            <h2 class="text-2xl font-bold mb-4" data-i18n="ai.title">ü§ñ Consulta a la IA</h2>
            
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4">
                <p class="mb-4" data-i18n="ai.description">Haz cualquier pregunta sobre tu viaje a Argentina y obt√©n ayuda personalizada:</p>
                
                <div class="space-y-4">
                    <div>
                        <label for="ai-prompt" class="block mb-1" data-i18n="ai.prompt">Tu pregunta:</label>
                        <textarea id="ai-prompt" class="w-full px-3 py-2 border rounded text-base" rows="3" placeholder="Ej: ¬øQu√© ropa deber√≠a llevar para Bariloche en octubre?"></textarea>
                    </div>
                    
                    <div class="flex">
                        <button id="ask-ai" class="flex-grow bg-primary-500 text-white py-2 rounded-l hover:bg-primary-600 transition duration-300">
                            <span data-i18n="ai.ask">Consultar</span>
                        </button>
                        <button id="clear-ai" class="bg-gray-500 text-white py-2 px-4 rounded-r hover:bg-gray-600 transition duration-300">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div id="ai-response" class="mt-4 p-4 bg-gray-100 dark:bg-gray-700 rounded max-h-64 overflow-y-auto hidden"></div>
                    <div id="ai-loading" class="text-center py-4 hidden">
                        <div class="inline-block w-8 h-8 border-4 border-gray-300 border-t-primary-500 rounded-full animate-spin"></div>
                        <p class="mt-2" data-i18n="ai.loading">Procesando tu consulta...</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-100 dark:bg-gray-800 py-6">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <p class="text-center md:text-left" data-i18n="footer.copyright">¬© 2025 Argentina Aventura Familiar</p>
                </div>
                <div class="flex space-x-4">
                    <a href="#" class="text-primary-500 hover:text-primary-600" aria-label="GitHub">
                        <i class="fab fa-github text-xl"></i>
                    </a>
                    <a href="#" class="text-primary-500 hover:text-primary-600" aria-label="Info">
                        <i class="fas fa-info-circle text-xl"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Detect dark mode
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
            updateCanvasImages();
        });
        
        // Apply primary color to elements
        document.querySelectorAll('.bg-primary-500').forEach(el => {
            el.style.backgroundColor = '#5D5CDE';
        });
        
        document.querySelectorAll('.hover\\:bg-primary-600').forEach(el => {
            el.addEventListener('mouseenter', () => {
                el.style.backgroundColor = '#4a49b0';
            });
            el.addEventListener('mouseleave', () => {
                el.style.backgroundColor = '#5D5CDE';
            });
        });
        
        document.querySelectorAll('.text-primary-500').forEach(el => {
            el.style.color = '#5D5CDE';
        });
        
        // Manejar estado de conectividad sin Service Worker
        window.addEventListener('online', () => {
            document.getElementById('offline-notification').style.display = 'none';
        });
            
        window.addEventListener('offline', () => {
            document.getElementById('offline-notification').style.display = 'block';
        });
        
        // Verificar estado de conexi√≥n inicial
        if (!navigator.onLine) {
            document.getElementById('offline-notification').style.display = 'block';
        }
        
        // Toggle theme
        document.getElementById('theme-toggle').addEventListener('click', () => {
            document.documentElement.classList.toggle('dark');
            updateCanvasImages();
        });
        
        // Toggle language
        let currentLang = 'es';
        const translations = {
            es: {
                "intro.title": "üá¶üá∑ Argentina: Aventura Familiar de 30 D√≠as (Itinerario V4.0)",
                "intro.important": "üìù Notas Generales Importantes",
                "intro.currency.title": "üí∞ Moneda y Cambio",
                "intro.currency.main": "La moneda oficial es el Peso Argentino ($ARS).",
                "intro.currency.important": "IMPORTANTE:",
                "intro.currency.situation": "La situaci√≥n cambiaria en Argentina es vol√°til. Existen diferentes tipos de cambio (oficial, MEP, \"Blue\"). Inf√≥rmate bien justo antes de viajar.",
                "intro.health.title": "ü©∫ Salud General y para Viajeros Diab√©ticos",
                "intro.health.insurance": "Seguro de Viaje:",
                "intro.health.insurance.desc": "Indispensable que cubra gastos m√©dicos mayores.",
                "intro.health.emergency": "Tel√©fonos de Urgencia Nacional:",
                "intro.health.emergency.numbers": "107 (Ambulancia), 911 (Emergencias Generales).",
                "itinerary.title": "üìç Itinerario Detallado",
                "cities.ba.title": "üá¶üá∑ Buenos Aires",
                "cities.ba.days": "D√≠as 1-4 / Noches 1-3",
                "cities.ba.dates": "üóìÔ∏è Fechas Estimadas:",
                "cities.ba.dates.value": "28 Sept - 01 Oct 2025",
                "cities.ba.transport": "‚úàÔ∏è Transporte:",
                "cities.ba.transport.details": "Llegada Aeropuerto Internacional de Ezeiza (EZE). Traslado a alojamiento.",
                "cities.ba.activities": "üéØ Actividades:",
                "cities.ba.day1": "D√≠a 1: Instalaci√≥n. Paseo por Palermo (Rosedal, Jard√≠n Japon√©s).",
                "cities.ba.day2": "D√≠a 2: Plaza de Mayo, Cementerio de Recoleta, Museo Prohibido No Tocar.",
                "cities.ba.day3": "D√≠a 3: La Boca (Caminito), San Telmo (Mercado, Plaza Dorrego).",
                "cities.ba.accommodation": "üõèÔ∏è Alojamientos:",
                "cities.ba.accommodation.details": "Apartamentos en Palermo, Recoleta o Villa Crespo.",
                "cities.ba.restaurants": "üçΩÔ∏è Restaurantes:",
                "cities.ba.restaurants.details": "Sintaxis Palermo (Sin TACC), Buenos Aires Verde (Saludable), Don Julio (Parrilla).",
                "cities.rosario.title": "üá¶üá∑ Rosario",
                "cities.rosario.days": "D√≠as 4-6 / Noches 4-5",
                "cities.rosario.dates": "üóìÔ∏è Fechas Estimadas:",
                "cities.rosario.dates.value": "01 Oct - 03 Oct 2025",
                "cities.rosario.transport": "‚úàÔ∏è Transporte:",
                "cities.rosario.transport.details": "Vuelo Buenos Aires (AEP) -> Rosario (ROS).",
                "cities.rosario.activities": "üéØ Actividades:",
                "cities.rosario.day1": "D√≠a 4: Costanera Central, Monumento Nacional a la Bandera.",
                "cities.rosario.day2": "D√≠a 5: Parque de la Independencia, Boulevard Oro√±o.",
                "cities.rosario.accommodation": "üõèÔ∏è Alojamientos:",
                "cities.rosario.accommodation.details": "Apartamentos c√©ntricos o cerca del r√≠o (Pichincha).",
                "cities.bariloche.title": "üá¶üá∑ Bariloche",
                "cities.bariloche.days": "D√≠as 6-10 / Noches 6-9",
                "cities.bariloche.dates": "üóìÔ∏è Fechas Estimadas:",
                "cities.bariloche.dates.value": "03 Oct - 07 Oct 2025",
                "cities.bariloche.transport": "‚úàÔ∏è Transporte:",
                "cities.bariloche.transport.details": "Vuelo Rosario (ROS) -> Bariloche (BRC). Recomendable alquilar coche.",
                "cities.bariloche.activities": "üéØ Actividades:",
                "cities.bariloche.day1": "D√≠a 6: Centro C√≠vico, costa Lago Nahuel Huapi. Chocolater√≠as.",
                "cities.bariloche.day2": "D√≠a 7: Circuito Chico (Cerro Campanario, Llao Llao).",
                "cities.bariloche.day3": "D√≠a 8: Navegaci√≥n Isla Victoria/Bosque de Arrayanes.",
                "cities.bariloche.day4": "D√≠a 9: Trekking ligero o d√≠a libre.",
                "buttons.details": "Ver detalles",
                "buttons.loadMore": "Cargar m√°s ciudades",
                "tools.title": "üß∞ Herramientas de Viaje",
                "tools.currency.title": "üí∞ Conversor de Moneda",
                "tools.currency.amount": "Cantidad:",
                "tools.currency.from": "De:",
                "tools.currency.to": "A:",
                "tools.currency.convert": "Convertir",
                "tools.currency.disclaimer": "Nota: Tipos de cambio aproximados. Los valores exactos pueden variar.",
                "tools.packing.title": "üß≥ Lista de Equipaje",
                "tools.packing.essential": "Esenciales:",
                "tools.packing.passport": "Pasaporte y documentos",
                "tools.packing.insurance": "Seguro de viaje",
                "tools.packing.medication": "Medicamentos",
                "tools.packing.custom": "Mis items:",
                "ai.title": "ü§ñ Consulta a la IA",
                "ai.description": "Haz cualquier pregunta sobre tu viaje a Argentina y obt√©n ayuda personalizada:",
                "ai.prompt": "Tu pregunta:",
                "ai.ask": "Consultar",
                "ai.loading": "Procesando tu consulta...",
                "footer.copyright": "¬© 2025 Argentina Aventura Familiar"
            },
            he: {
                "intro.title": "üá¶üá∑ ◊ê◊®◊í◊†◊ò◊ô◊†◊î: ◊î◊®◊§◊™◊ß◊î ◊û◊©◊§◊ó◊™◊ô◊™ ◊©◊ú 30 ◊ô◊û◊ô◊ù (◊û◊°◊ú◊ï◊ú V4.0)",
                "intro.important": "üìù ◊î◊¢◊®◊ï◊™ ◊õ◊ú◊ú◊ô◊ï◊™ ◊ó◊©◊ï◊ë◊ï◊™",
                "intro.currency.title": "üí∞ ◊û◊ò◊ë◊¢ ◊ï◊ó◊ú◊ô◊§◊ô◊ü",
                "intro.currency.main": "◊î◊û◊ò◊ë◊¢ ◊î◊®◊©◊û◊ô ◊î◊ï◊ê ◊î◊§◊°◊ï ◊î◊ê◊®◊í◊†◊ò◊ô◊†◊ê◊ô ($ARS).",
                "intro.currency.important": "◊ó◊©◊ï◊ë:",
                "intro.currency.situation": "◊û◊¶◊ë ◊î◊û◊ò◊ë◊¢ ◊ë◊ê◊®◊í◊†◊ò◊ô◊†◊î ◊î◊ï◊ê ◊†◊ô◊ô◊ì. ◊ß◊ô◊ô◊û◊ô◊ù ◊©◊¢◊®◊ô ◊ó◊ú◊ô◊§◊ô◊ü ◊©◊ï◊†◊ô◊ù (◊®◊©◊û◊ô, MEP, \"Blue\"). ◊î◊™◊¢◊ì◊õ◊ü ◊ú◊§◊†◊ô ◊î◊†◊°◊ô◊¢◊î.",
                "intro.health.title": "ü©∫ ◊ë◊®◊ô◊ê◊ï◊™ ◊õ◊ú◊ú◊ô◊™ ◊ï◊ú◊û◊ò◊ô◊ô◊ú◊ô◊ù ◊°◊ï◊õ◊®◊™◊ô◊ô◊ù",
                "intro.health.insurance": "◊ë◊ô◊ò◊ï◊ó ◊†◊°◊ô◊¢◊ï◊™:",
                "intro.health.insurance.desc": "◊ó◊ô◊ï◊†◊ô ◊©◊ô◊õ◊°◊î ◊î◊ï◊¶◊ê◊ï◊™ ◊®◊§◊ï◊ê◊ô◊ï◊™ ◊í◊ë◊ï◊î◊ï◊™.",
                "intro.health.emergency": "◊ò◊ú◊§◊ï◊†◊ô◊ù ◊ú◊ó◊ô◊®◊ï◊ù ◊ú◊ê◊ï◊û◊ô:",
                "intro.health.emergency.numbers": "107 (◊ê◊û◊ë◊ï◊ú◊†◊°), 911 (◊ó◊ô◊®◊ï◊ù ◊õ◊ú◊ú◊ô).",
                "itinerary.title": "üìç ◊û◊°◊ú◊ï◊ú ◊û◊§◊ï◊®◊ò",
                "cities.ba.title": "üá¶üá∑ ◊ë◊ï◊ê◊†◊ï◊° ◊ê◊ô◊ô◊®◊°",
                "cities.ba.days": "◊ô◊û◊ô◊ù 1-4 / ◊ú◊ô◊ú◊ï◊™ 1-3",
                "cities.ba.dates": "üóìÔ∏è ◊™◊ê◊®◊ô◊õ◊ô◊ù ◊û◊©◊ï◊¢◊®◊ô◊ù:",
                "cities.ba.dates.value": "28 ◊°◊§◊ò' - 01 ◊ê◊ï◊ß' 2025",
                "cities.ba.transport": "‚úàÔ∏è ◊™◊ó◊ë◊ï◊®◊î:",
                "cities.ba.transport.details": "◊î◊í◊¢◊î ◊ú◊©◊ì◊î ◊î◊™◊¢◊ï◊§◊î ◊î◊ë◊ô◊†◊ú◊ê◊ï◊û◊ô ◊ê◊ñ◊ô◊ñ◊î (EZE). ◊î◊¢◊ë◊®◊î ◊ú◊û◊ß◊ï◊ù ◊î◊ê◊ô◊®◊ï◊ó.",
                "cities.ba.activities": "üéØ ◊§◊¢◊ô◊ú◊ï◊ô◊ï◊™:",
                "cities.ba.day1": "◊ô◊ï◊ù 1: ◊î◊™◊ê◊®◊í◊†◊ï◊™. ◊ò◊ô◊ï◊ú ◊ë◊§◊ú◊®◊û◊ï (◊®◊ï◊ñ◊ì◊ú, ◊î◊í◊ü ◊î◊ô◊§◊†◊ô).",
                "cities.ba.day2": "◊ô◊ï◊ù 2: ◊§◊ú◊ê◊ñ◊î ◊ì◊î ◊û◊ê◊ô◊ï, ◊ë◊ô◊™ ◊î◊ß◊ë◊®◊ï◊™ ◊®◊ß◊ï◊ú◊ò◊î, ◊û◊ï◊ñ◊ô◊ê◊ï◊ü ◊ê◊°◊ï◊® ◊ú◊ê ◊ú◊í◊¢◊™.",
                "cities.ba.day3": "◊ô◊ï◊ù 3: ◊ú◊î ◊ë◊ï◊ß◊î (◊ß◊û◊ô◊†◊ô◊ò◊ï), ◊°◊ü ◊ò◊ú◊û◊ï (◊©◊ï◊ß, ◊§◊ú◊ê◊ñ◊î ◊ì◊ï◊®◊í◊ï).",
                "cities.ba.accommodation": "üõèÔ∏è ◊û◊ß◊ï◊û◊ï◊™ ◊ú◊ô◊†◊î:",
                "cities.ba.accommodation.details": "◊ì◊ô◊®◊ï◊™ ◊ë◊§◊ú◊®◊û◊ï, ◊®◊ß◊ï◊ú◊ò◊î ◊ê◊ï ◊ï◊ô◊ú◊î ◊ß◊®◊°◊§◊ï.",
                "cities.ba.restaurants": "üçΩÔ∏è ◊û◊°◊¢◊ì◊ï◊™:",
                "cities.ba.restaurants.details": "◊°◊ô◊†◊ò◊ß◊°◊ô◊° ◊§◊ú◊®◊û◊ï (◊ú◊ú◊ê ◊í◊ú◊ï◊ò◊ü), ◊ë◊ï◊ê◊†◊ï◊° ◊ê◊ô◊ô◊®◊° ◊ï◊®◊ì◊î (◊ë◊®◊ô◊ê◊ï◊™), ◊ì◊ï◊ü ◊ó◊ï◊ú◊ô◊ï (◊í◊®◊ô◊ú).",
                "cities.rosario.title": "üá¶üá∑ ◊®◊ï◊°◊®◊ô◊ï",
                "cities.rosario.days": "◊ô◊û◊ô◊ù 4-6 / ◊ú◊ô◊ú◊ï◊™ 4-5",
                "cities.rosario.dates": "üóìÔ∏è ◊™◊ê◊®◊ô◊õ◊ô◊ù ◊û◊©◊ï◊¢◊®◊ô◊ù:",
                "cities.rosario.dates.value": "01 ◊ê◊ï◊ß' - 03 ◊ê◊ï◊ß' 2025",
                "cities.rosario.transport": "‚úàÔ∏è ◊™◊ó◊ë◊ï◊®◊î:",
                "cities.rosario.transport.details": "◊ò◊ô◊°◊î ◊û◊ë◊ï◊ê◊†◊ï◊° ◊ê◊ô◊ô◊®◊° (AEP) -> ◊®◊ï◊°◊®◊ô◊ï (ROS).",
                "cities.rosario.activities": "üéØ ◊§◊¢◊ô◊ú◊ï◊ô◊ï◊™:",
                "cities.rosario.day1": "◊ô◊ï◊ù 4: ◊ò◊ô◊ô◊ú◊™ ◊û◊®◊õ◊ñ◊ô◊™, ◊û◊ï◊†◊ï◊û◊†◊ò ◊î◊ì◊í◊ú ◊î◊ú◊ê◊ï◊û◊ô.",
                "cities.rosario.day2": "◊ô◊ï◊ù 5: ◊§◊ê◊®◊ß ◊î◊¢◊¶◊û◊ê◊ï◊™, ◊©◊ì◊®◊ï◊™ ◊ê◊ï◊®◊ï◊†◊ô◊ï.",
                "cities.rosario.accommodation": "üõèÔ∏è ◊û◊ß◊ï◊û◊ï◊™ ◊ú◊ô◊†◊î:",
                "cities.rosario.accommodation.details": "◊ì◊ô◊®◊ï◊™ ◊ë◊û◊®◊õ◊ñ ◊ê◊ï ◊ú◊ô◊ì ◊î◊†◊î◊® (◊§◊ô◊¶'◊ô◊†◊¶'◊î).",
                "cities.bariloche.title": "üá¶üá∑ ◊ë◊®◊ô◊ú◊ï◊¶'◊î",
                "cities.bariloche.days": "◊ô◊û◊ô◊ù 6-10 / ◊ú◊ô◊ú◊ï◊™ 6-9",
                "cities.bariloche.dates": "üóìÔ∏è ◊™◊ê◊®◊ô◊õ◊ô◊ù ◊û◊©◊ï◊¢◊®◊ô◊ù:",
                "cities.bariloche.dates.value": "03 ◊ê◊ï◊ß' - 07 ◊ê◊ï◊ß' 2025",
                "cities.bariloche.transport": "‚úàÔ∏è ◊™◊ó◊ë◊ï◊®◊î:",
                "cities.bariloche.transport.details": "◊ò◊ô◊°◊î ◊û◊®◊ï◊°◊®◊ô◊ï (ROS) -> ◊ë◊®◊ô◊ú◊ï◊¶'◊î (BRC). ◊û◊ï◊û◊ú◊• ◊ú◊©◊õ◊ï◊® ◊®◊õ◊ë.",
                "cities.bariloche.activities": "üéØ ◊§◊¢◊ô◊ú◊ï◊ô◊ï◊™:",
                "cities.bariloche.day1": "◊ô◊ï◊ù 6: ◊û◊®◊õ◊ñ ◊ê◊ñ◊®◊ó◊ô, ◊ó◊ï◊£ ◊ê◊í◊ù ◊†◊ê◊ï◊ï◊ú ◊ï◊ï◊ê◊§◊ô. ◊ó◊†◊ï◊ô◊ï◊™ ◊©◊ï◊ß◊ï◊ú◊ì.",
                "cities.bariloche.day2": "◊ô◊ï◊ù 7: ◊î◊û◊¢◊í◊ú ◊î◊ß◊ò◊ü (◊î◊® ◊ß◊û◊§◊†◊®◊ô◊ï, ◊ú◊ô◊ê◊ï ◊ú◊ô◊ê◊ï).",
                "cities.bariloche.day3": "◊ô◊ï◊ù 8: ◊©◊ô◊ò ◊ú◊ê◊ô ◊ï◊ô◊ß◊ò◊ï◊®◊ô◊î/◊ô◊¢◊® ◊î◊ê◊®◊ê◊ô◊ê◊†◊°.",
                "cities.bariloche.day4": "◊ô◊ï◊ù 9: ◊ò◊®◊ß◊ô◊†◊í ◊ß◊ú ◊ê◊ï ◊ô◊ï◊ù ◊ó◊ï◊§◊©◊ô.",
                "buttons.details": "◊î◊¶◊í ◊§◊®◊ò◊ô◊ù",
                "buttons.loadMore": "◊ò◊¢◊ü ◊¢◊®◊ô◊ù ◊†◊ï◊°◊§◊ï◊™",
                "tools.title": "üß∞ ◊õ◊ú◊ô◊ù ◊ú◊†◊°◊ô◊¢◊î",
                "tools.currency.title": "üí∞ ◊û◊û◊ô◊® ◊û◊ò◊ë◊¢◊ï◊™",
                "tools.currency.amount": "◊°◊õ◊ï◊ù:",
                "tools.currency.from": "◊û:",
                "tools.currency.to": "◊ú:",
                "tools.currency.convert": "◊î◊û◊®",
                "tools.currency.disclaimer": "◊î◊¢◊®◊î: ◊©◊¢◊®◊ô ◊ó◊ú◊ô◊§◊ô◊ü ◊û◊©◊ï◊¢◊®◊ô◊ù. ◊î◊¢◊®◊õ◊ô◊ù ◊î◊û◊ì◊ï◊ô◊ß◊ô◊ù ◊¢◊©◊ï◊ô◊ô◊ù ◊ú◊î◊©◊™◊†◊ï◊™.",
                "tools.packing.title": "üß≥ ◊®◊©◊ô◊û◊™ ◊ê◊®◊ô◊ñ◊î",
                "tools.packing.essential": "◊ó◊ô◊ï◊†◊ô◊ô◊ù:",
                "tools.packing.passport": "◊ì◊®◊õ◊ï◊ü ◊ï◊û◊°◊û◊õ◊ô◊ù",
                "tools.packing.insurance": "◊ë◊ô◊ò◊ï◊ó ◊†◊°◊ô◊¢◊ï◊™",
                "tools.packing.medication": "◊™◊®◊ï◊§◊ï◊™",
                "tools.packing.custom": "◊î◊§◊®◊ô◊ò◊ô◊ù ◊©◊ú◊ô:",
                "ai.title": "ü§ñ ◊©◊ê◊ú ◊ê◊™ ◊î◊ë◊ô◊†◊î ◊î◊û◊ú◊ê◊õ◊ï◊™◊ô◊™",
                "ai.description": "◊©◊ê◊ú ◊õ◊ú ◊©◊ê◊ú◊î ◊¢◊ú ◊î◊ò◊ô◊ï◊ú ◊©◊ú◊ö ◊ú◊ê◊®◊í◊†◊ò◊ô◊†◊î ◊ï◊ß◊ë◊ú ◊¢◊ñ◊®◊î ◊û◊ï◊™◊ê◊û◊™ ◊ê◊ô◊©◊ô◊™:",
                "ai.prompt": "◊î◊©◊ê◊ú◊î ◊©◊ú◊ö:",
                "ai.ask": "◊©◊ê◊ú",
                "ai.loading": "◊û◊¢◊ë◊ì ◊ê◊™ ◊î◊©◊ê◊ú◊î ◊©◊ú◊ö...",
                "footer.copyright": "¬© 2025 ◊î◊®◊§◊™◊ß◊î ◊û◊©◊§◊ó◊™◊ô◊™ ◊ë◊ê◊®◊í◊†◊ò◊ô◊†◊î"
            }
        };
        
        document.getElementById('language-toggle').addEventListener('click', () => {
            currentLang = currentLang === 'es' ? 'he' : 'es';
            document.getElementById('current-lang').textContent = currentLang.toUpperCase();
            updateTranslations();
            
            // For Hebrew, add RTL support
            if (currentLang === 'he') {
                document.body.setAttribute('dir', 'rtl');
            } else {
                document.body.setAttribute('dir', 'ltr');
            }
        });
        
        function updateTranslations() {
            const elements = document.querySelectorAll('[data-i18n]');
            elements.forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[currentLang][key]) {
                    el.textContent = translations[currentLang][key];
                }
            });
        }
        
        // Toggle details for city cards
        document.querySelectorAll('.toggle-details').forEach(button => {
            button.addEventListener('click', () => {
                const targetId = button.getAttribute('data-target');
                const parent = button.closest('.city-card');
                parent.classList.toggle('expanded');
                
                const contentElement = document.getElementById(targetId);
                if (parent.classList.contains('expanded')) {
                    button.querySelector('span').textContent = currentLang === 'es' ? 'Ocultar detalles' : '◊î◊°◊™◊® ◊§◊®◊ò◊ô◊ù';
                } else {
                    button.querySelector('span').textContent = currentLang === 'es' ? 'Ver detalles' : '◊î◊¶◊í ◊§◊®◊ò◊ô◊ù';
                }
            });
        });
        
        // More cities data (simplified for demo)
        const moreCities = [
            {
                id: 'mendoza',
                title: 'üá¶üá∑ Mendoza & Malarg√ºe',
                days: 'D√≠as 10-14 / Noches 10-13',
                dates: '07 Oct - 11 Oct 2025',
                transport: 'Vuelo Bariloche (BRC) -> Mendoza (MDZ). Alquilar coche.',
                activities: [
                    'D√≠a 10: Centro Mendoza: Plaza Independencia, Parque San Mart√≠n.',
                    'D√≠a 11: Tour Bodegas (Luj√°n de Cuyo/Maip√∫).',
                    'D√≠a 12: Viaje Mendoza -> Malarg√ºe. Laguna Ni√±a Encantada.',
                    'D√≠a 13: Reserva Payunia o Caverna de las Brujas.'
                ]
            },
            {
                id: 'jujuy',
                title: 'üá¶üá∑ Noroeste (Purmamarca/Tilcara)',
                days: 'D√≠as 14-19 / Noches 14-18',
                dates: '11 Oct - 16 Oct 2025',
                transport: 'Vuelo Mendoza (MDZ) -> Jujuy (JUJ) o Salta (SLA).',
                activities: [
                    'D√≠a 14: Llegada, aclimataci√≥n. Cerro de los Siete Colores.',
                    'D√≠a 15: Paseo de los Colorados. Tarde: Salinas Grandes.',
                    'D√≠a 16: Quebrada de Humahuaca: Tilcara, Uqu√≠a, Humahuaca.',
                    'D√≠a 17: Trekking Garganta del Diablo o Maimar√°.'
                ]
            },
            {
                id: 'iguazu',
                title: 'üá¶üá∑ Puerto Iguaz√∫',
                days: 'D√≠as 19-23 / Noches 19-21',
                dates: '16 Oct - 20 Oct 2025',
                transport: 'Vuelo Jujuy/Salta -> Puerto Iguaz√∫ (IGR).',
                activities: [
                    'D√≠a 19: Llegada. Hito Tres Fronteras.',
                    'D√≠a 20: Cataratas Lado Argentino.',
                    'D√≠a 21: Ma√±ana: Cataratas Lado Brasile√±o. Bus Nocturno a Corrientes.'
                ]
            }
        ];
        
        // Load more cities
        document.getElementById('load-more').addEventListener('click', function() {
            this.disabled = true;
            const spinner = this.querySelector('.loading-spinner');
            spinner.classList.remove('hidden');
            
            setTimeout(() => {
                const container = document.querySelector('#itinerary .grid');
                
                moreCities.forEach(city => {
                    const cityCard = document.createElement('div');
                    cityCard.className = 'city-card bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden';
                    
                    const cityHTML = `
                        <div class="city-image h-48 bg-gray-300 relative">
                            <div class="absolute inset-0 flex items-center justify-center">
                                <canvas id="${city.id}-canvas" width="400" height="192" class="w-full h-full"></canvas>
                            </div>
                        </div>
                        <div class="p-4">
                            <h3 class="text-xl font-bold mb-2">${city.title}</h3>
                            <p class="mb-2">${city.days}</p>
                            <button class="toggle-details w-full bg-primary-500 text-white py-2 rounded hover:bg-primary-600 transition duration-300" data-target="${city.id}-details">
                                <span>${currentLang === 'es' ? 'Ver detalles' : '◊î◊¶◊í ◊§◊®◊ò◊ô◊ù'}</span>
                            </button>
                            
                            <div id="${city.id}-details" class="hidden-content mt-4">
                                <div class="mb-3">
                                    <h4 class="font-semibold">üóìÔ∏è Fechas Estimadas:</h4>
                                    <p>${city.dates}</p>
                                </div>
                                
                                <div class="mb-3">
                                    <h4 class="font-semibold">‚úàÔ∏è Transporte:</h4>
                                    <p>${city.transport}</p>
                                </div>
                                
                                <div class="mb-3">
                                    <h4 class="font-semibold">üéØ Actividades:</h4>
                                    <ul class="list-disc pl-5">
                                        ${city.activities.map(activity => `<li>${activity}</li>`).join('')}
                                    </ul>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    cityCard.innerHTML = cityHTML;
                    container.appendChild(cityCard);
                    
                    // Draw city image
                    drawCityImage(city.id);
                });
                
                // Re-attach event listeners for new toggle buttons
                document.querySelectorAll('.toggle-details').forEach(button => {
                    button.addEventListener('click', () => {
                        const targetId = button.getAttribute('data-target');
                        const parent = button.closest('.city-card');
                        parent.classList.toggle('expanded');
                        
                        if (parent.classList.contains('expanded')) {
                            button.querySelector('span').textContent = currentLang === 'es' ? 'Ocultar detalles' : '◊î◊°◊™◊® ◊§◊®◊ò◊ô◊ù';
                        } else {
                            button.querySelector('span').textContent = currentLang === 'es' ? 'Ver detalles' : '◊î◊¶◊í ◊§◊®◊ò◊ô◊ù';
                        }
                    });
                });
                
                // Hide the button after loading all cities
                this.style.display = 'none';
            }, 1500);
        });
        
        // Currency converter functionality
        document.getElementById('convert-btn').addEventListener('click', () => {
            const amount = parseFloat(document.getElementById('amount').value);
            const fromCurrency = document.getElementById('from-currency').value;
            const toCurrency = document.getElementById('to-currency').value;
            
            // Mock exchange rates (simplified)
            const rates = {
                USD: { ARS: 1050, EUR: 0.92, ILS: 3.6 },
                EUR: { ARS: 1140, USD: 1.09, ILS: 3.92 },
                ILS: { ARS: 291, USD: 0.28, EUR: 0.26 },
                ARS: { USD: 0.00095, EUR: 0.00088, ILS: 0.0034 }
            };
            
            let result;
            if (fromCurrency === toCurrency) {
                result = amount;
            } else {
                result = amount * rates[fromCurrency][toCurrency];
            }
            
            document.getElementById('conversion-result').textContent = 
                `${amount} ${fromCurrency} = ${result.toFixed(2)} ${toCurrency}`;
        });
        
        // Packing list functionality
        document.getElementById('add-item').addEventListener('click', () => {
            const itemInput = document.getElementById('packing-item');
            const itemText = itemInput.value.trim();
            
            if (itemText) {
                const itemList = document.getElementById('custom-packing-list');
                const id = 'item-' + Date.now();
                
                const listItem = document.createElement('li');
                listItem.className = 'flex items-center justify-between';
                listItem.innerHTML = `
                    <div class="flex items-center">
                        <input type="checkbox" id="${id}" class="mr-2">
                        <label for="${id}">${itemText}</label>
                    </div>
                    <button class="text-red-500 hover:text-red-700">
                        <i class="fas fa-trash"></i>
                    </button>
                `;
                
                // Add delete functionality
                listItem.querySelector('button').addEventListener('click', () => {
                    listItem.remove();
                    savePackingList();
                });
                
                // Add checkbox functionality
                listItem.querySelector('input').addEventListener('change', savePackingList);
                
                itemList.appendChild(listItem);
                itemInput.value = '';
                
                savePackingList();
            }
        });
        
        // Guardar lista de equipaje (usando memoria en sesi√≥n en lugar de localStorage)
        const packingListMemory = {
            custom: [],
            essential: []
        };
        
        function savePackingList() {
            packingListMemory.custom = [];
            document.querySelectorAll('#custom-packing-list li').forEach(item => {
                packingListMemory.custom.push({
                    text: item.querySelector('label').textContent,
                    checked: item.querySelector('input').checked
                });
            });
            
            packingListMemory.essential = [];
            document.querySelectorAll('#packing-list li').forEach(item => {
                packingListMemory.essential.push({
                    id: item.querySelector('input').id,
                    checked: item.querySelector('input').checked
                });
            });
            
            // No necesitamos intentar usar localStorage
            console.log('Lista de equipaje guardada en memoria');
        }
        
        // Cargar lista de equipaje desde la memoria
        function loadPackingList() {
            // Cargar elementos esenciales
            if (packingListMemory.essential && packingListMemory.essential.length > 0) {
                packingListMemory.essential.forEach(item => {
                    const checkbox = document.getElementById(item.id);
                    if (checkbox) {
                        checkbox.checked = item.checked;
                    }
                });
            }
            
            // Cargar elementos personalizados
            if (packingListMemory.custom && packingListMemory.custom.length > 0) {
                const customList = document.getElementById('custom-packing-list');
                customList.innerHTML = '';
                
                packingListMemory.custom.forEach(item => {
                    const id = 'item-' + Date.now() + Math.random().toString(36).substring(2, 9);
                    const listItem = document.createElement('li');
                    listItem.className = 'flex items-center justify-between';
                    listItem.innerHTML = `
                        <div class="flex items-center">
                            <input type="checkbox" id="${id}" class="mr-2" ${item.checked ? 'checked' : ''}>
                            <label for="${id}">${item.text}</label>
                        </div>
                        <button class="text-red-500 hover:text-red-700">
                            <i class="fas fa-trash"></i>
                        </button>
                    `;
                    
                    listItem.querySelector('button').addEventListener('click', () => {
                        listItem.remove();
                        savePackingList();
                    });
                    
                    listItem.querySelector('input').addEventListener('change', savePackingList);
                    
                    customList.appendChild(listItem);
                });
            }
        }
        
        // Add items when pressing Enter in the input field
        document.getElementById('packing-item').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                document.getElementById('add-item').click();
            }
        });
        
        // AI consultation functionality
        document.getElementById('ask-ai').addEventListener('click', async () => {
            const prompt = document.getElementById('ai-prompt').value.trim();
            if (!prompt) return;
            
            document.getElementById('ai-loading').classList.remove('hidden');
            document.getElementById('ai-response').classList.add('hidden');
            
            try {
                if (window.Poe) {
                    await window.Poe.sendUserMessage(
                        "@Claude-3.7-Sonnet Act√∫a como un experto en viajes a Argentina. " + prompt,
                        {
                            handler: "ai-response-handler",
                            stream: true,
                            openChat: false
                        }
                    );
                } else {
                    // Fallback for when Poe API is not available
                    setTimeout(() => {
                        const responseEl = document.getElementById('ai-response');
                        responseEl.innerHTML = generarRespuestaFallback(prompt);
                        responseEl.classList.remove('hidden');
                        document.getElementById('ai-loading').classList.add('hidden');
                    }, 1500);
                }
            } catch (error) {
                document.getElementById('ai-response').innerHTML = `
                    <div class="text-red-500">
                        <p>Ocurri√≥ un error al procesar tu consulta. Por favor, intenta nuevamente.</p>
                        <p class="text-sm">${error.message || 'Error desconocido'}</p>
                    </div>
                `;
                document.getElementById('ai-response').classList.remove('hidden');
                document.getElementById('ai-loading').classList.add('hidden');
            }
        });
        
        // Register handler for AI responses
        if (window.Poe) {
            window.Poe.registerHandler("ai-response-handler", (result) => {
                const responseEl = document.getElementById('ai-response');
                const msg = result.responses[0];
                
                if (msg.status === "error") {
                    responseEl.innerHTML = `<div class="text-red-500">Error: ${msg.statusText || 'Desconocido'}</div>`;
                } else {
                    // Formatear el markdown
                    responseEl.innerHTML = formatearMarkdown(msg.content);
                }
                
                responseEl.classList.remove('hidden');
                
                if (msg.status === "complete") {
                    document.getElementById('ai-loading').classList.add('hidden');
                }
            });
        }
        
        // Clear AI response
        document.getElementById('clear-ai').addEventListener('click', () => {
            document.getElementById('ai-prompt').value = '';
            document.getElementById('ai-response').innerHTML = '';
            document.getElementById('ai-response').classList.add('hidden');
        });
        
        // Fallback AI response generator
        function generarRespuestaFallback(prompt) {
            const respuestas = {
                "tiempo": "<h3>Clima en Argentina</h3><p>Argentina tiene climas variados seg√∫n la regi√≥n:</p><ul><li><strong>Buenos Aires y Rosario:</strong> Primavera (oct-nov): 15-25¬∞C, templado y agradable.</li><li><strong>Bariloche:</strong> Primavera tard√≠a: 5-15¬∞C, posibles lluvias ocasionales.</li><li><strong>Mendoza:</strong> Primavera: 15-25¬∞C, seco y soleado.</li><li><strong>Noroeste (Jujuy):</strong> 15-30¬∞C, seco durante el d√≠a, fresco por la noche.</li><li><strong>Iguaz√∫:</strong> 20-30¬∞C, clima tropical, posibles lluvias.</li><li><strong>Iber√°:</strong> 20-30¬∞C, subtropical, posibles lluvias.</li></ul>",
                "ropa": "<h3>Ropa Recomendada</h3><p>Para un viaje por varias regiones en octubre:</p><ul><li><strong>Capas:</strong> Imprescindible debido a las variaciones de temperatura.</li><li><strong>Abrigo ligero/impermeable:</strong> Para Bariloche y noches frescas.</li><li><strong>Ropa fresca:</strong> Para d√≠as calurosos en Iguaz√∫/Iber√°.</li><li><strong>Calzado c√≥modo:</strong> Para caminatas en ciudades y naturaleza.</li><li><strong>Protecci√≥n solar:</strong> Sombrero, gafas y protector solar.</li><li><strong>Repelente:</strong> Especialmente para Iguaz√∫ e Iber√°.</li></ul>",
                "transporte": "<h3>Transporte en Argentina</h3><p>Opciones seg√∫n tus tramos:</p><ul><li><strong>Entre ciudades lejanas:</strong> Vuelos dom√©sticos (Aerol√≠neas Argentinas, JetSmart, Flybondi).</li><li><strong>Buses:</strong> Excelente red de autobuses de larga distancia. Empresas: V√≠a Bariloche, Andesmar.</li><li><strong>Alquiler de coche:</strong> Recomendado para Bariloche y Mendoza.</li><li><strong>En ciudades:</strong> Aplicaciones como Cabify, Uber (Buenos Aires), transporte p√∫blico.</li></ul><p>Reserva vuelos dom√©sticos con antelaci√≥n para mejores tarifas.</p>"
            };
            
            // Determinar qu√© respuesta dar basada en palabras clave en la consulta
            const promptLower = prompt.toLowerCase();
            let respuesta = "";
            
            if (promptLower.includes("tiempo") || promptLower.includes("clima") || promptLower.includes("temperatura")) {
                respuesta = respuestas.tiempo;
            } else if (promptLower.includes("ropa") || promptLower.includes("vestir") || promptLower.includes("llevar")) {
                respuesta = respuestas.ropa;
            } else if (promptLower.includes("transporte") || promptLower.includes("viajar") || promptLower.includes("moverse")) {
                respuesta = respuestas.transporte;
            } else {
                // Respuesta gen√©rica
                respuesta = `<h3>Informaci√≥n sobre tu viaje a Argentina</h3>
                <p>Para poder darte informaci√≥n m√°s espec√≠fica sobre tu consulta "${prompt}", necesitar√≠a m√°s detalles.</p>
                <p>Mientras tanto, aqu√≠ tienes algunos consejos generales:</p>
                <ul>
                    <li>Verifica siempre las condiciones clim√°ticas de cada regi√≥n antes de viajar.</li>
                    <li>Ten a mano informaci√≥n de contacto de emergencias y tu seguro de viaje.</li>
                    <li>Argentina es un pa√≠s grande y diverso, planifica bien los tiempos de traslado entre ciudades.</li>
                    <li>Los argentinos cenan tarde (21:00-22:00), tenlo en cuenta para tus reservas.</li>
                    <li>Lleva adaptadores de corriente (Argentina usa tipo I: 230V, 50Hz).</li>
                </ul>`;
            }
            
            return respuesta;
        }
        
        // Funci√≥n para formatear markdown b√°sico
        function formatearMarkdown(text) {
            // Convertir encabezados
            text = text.replace(/^### (.*$)/gm, '<h3>$1</h3>');
            text = text.replace(/^## (.*$)/gm, '<h2>$1</h2>');
            text = text.replace(/^# (.*$)/gm, '<h1>$1</h1>');
            
            // Convertir formatos de texto
            text = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            text = text.replace(/\*(.*?)\*/g, '<em>$1</em>');
            
            // Convertir listas
            text = text.replace(/^\s*\d+\.\s+(.*$)/gm, '<li>$1</li>');
            text = text.replace(/^\s*[\-\*]\s+(.*$)/gm, '<li>$1</li>');
            
            // Envolver listas
            text = text.replace(/<\/li>\n<li>/g, '</li><li>');
            text = text.replace(/<li>(.+?)(?=<\/li>|$)/g, function(match) {
                if (match.match(/^\<li>\d+\.\s/)) {
                    return '<ol>' + match;
                } else {
                    return '<ul>' + match;
                }
            });
            text = text.replace(/<\/li>(?!\n<li>)/g, '</li></ul>');
            
            // Convertir p√°rrafos
            text = text.replace(/(?:^|\n)(?!<[uo]l>|<li>|<h)(.+?)(?=\n|$)/g, '<p>$1</p>');
            
            return text;
        }
        
        // Draw city images using canvas (programmatically generated)
        function drawCityImage(cityId) {
            const canvas = document.getElementById(`${cityId}-canvas`);
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            const isDark = document.documentElement.classList.contains('dark');
            
            // Clear canvas
            ctx.clearRect(0, 0, width, height);
            
            // City-specific drawings
            switch(cityId) {
                case 'ba-canvas':
                    drawBuenosAires(ctx, width, height, isDark);
                    break;
                case 'rosario-canvas':
                    drawRosario(ctx, width, height, isDark);
                    break;
                case 'bariloche-canvas':
                    drawBariloche(ctx, width, height, isDark);
                    break;
                case 'mendoza':
                    drawMendoza(ctx, width, height, isDark);
                    break;
                case 'jujuy':
                    drawJujuy(ctx, width, height, isDark);
                    break;
                case 'iguazu':
                    drawIguazu(ctx, width, height, isDark);
                    break;
                default:
                    // Generic Argentina-themed background
                    drawArgentina(ctx, width, height, isDark);
            }
        }
        
        function drawBuenosAires(ctx, width, height, isDark) {
            // Sky
            const skyGradient = ctx.createLinearGradient(0, 0, 0, height * 0.6);
            if (isDark) {
                skyGradient.addColorStop(0, '#1a237e');
                skyGradient.addColorStop(1, '#303f9f');
            } else {
                skyGradient.addColorStop(0, '#64b5f6');
                skyGradient.addColorStop(1, '#bbdefb');
            }
            ctx.fillStyle = skyGradient;
            ctx.fillRect(0, 0, width, height * 0.6);
            
            // Ground
            ctx.fillStyle = isDark ? '#424242' : '#8d6e63';
            ctx.fillRect(0, height * 0.6, width, height * 0.4);
            
            // Obelisco
            ctx.fillStyle = isDark ? '#e0e0e0' : '#f5f5f5';
            ctx.fillRect(width * 0.4, height * 0.2, width * 0.05, height * 0.6);
            ctx.beginPath();
            ctx.moveTo(width * 0.4, height * 0.2);
            ctx.lineTo(width * 0.425, height * 0.1);
            ctx.lineTo(width * 0.45, height * 0.2);
            ctx.fill();
            
            // Buildings
            for (let i = 0; i < 8; i++) {
                const bWidth = width * 0.1;
                const bHeight = height * (0.2 + Math.random() * 0.3);
                const bX = width * (0.05 + i * 0.12);
                
                ctx.fillStyle = isDark ? 
                    `rgba(${50 + Math.random() * 30}, ${50 + Math.random() * 30}, ${70 + Math.random() * 30}, 0.9)` : 
                    `rgba(${200 + Math.random() * 55}, ${200 + Math.random() * 55}, ${200 + Math.random() * 55}, 0.9)`;
                
                ctx.fillRect(bX, height * 0.6 - bHeight, bWidth, bHeight);
                
                // Windows
                ctx.fillStyle = isDark ? '#ffeb3b' : '#212121';
                for (let j = 0; j < 5; j++) {
                    for (let k = 0; k < 3; k++) {
                        if (Math.random() > 0.3) {
                            ctx.fillRect(
                                bX + bWidth * 0.2 + k * bWidth * 0.25, 
                                height * 0.6 - bHeight + bHeight * 0.2 + j * bHeight * 0.15, 
                                bWidth * 0.15, 
                                bHeight * 0.08
                            );
                        }
                    }
                }
            }
        }
        
        function drawRosario(ctx, width, height, isDark) {
            // Sky
            const skyGradient = ctx.createLinearGradient(0, 0, 0, height * 0.7);
            if (isDark) {
                skyGradient.addColorStop(0, '#0d47a1');
                skyGradient.addColorStop(1, '#1976d2');
            } else {
                skyGradient.addColorStop(0, '#29b6f6');
                skyGradient.addColorStop(1, '#81d4fa');
            }
            ctx.fillStyle = skyGradient;
            ctx.fillRect(0, 0, width, height * 0.7);
            
            // River
            ctx.fillStyle = isDark ? '#01579b' : '#4fc3f7';
            ctx.fillRect(0, height * 0.7, width, height * 0.3);
            
            // Monumento a la Bandera
            ctx.fillStyle = isDark ? '#e0e0e0' : '#f5f5f5';
            
            // Base
            ctx.fillRect(width * 0.3, height * 0.5, width * 0.4, height * 0.2);
            
            // Tower
            ctx.fillRect(width * 0.45, height * 0.2, width * 0.1, height * 0.3);
            
            // Flag
            ctx.fillStyle = '#64b5f6';  // Light blue
            ctx.fillRect(width * 0.55, height * 0.25, width * 0.15, height * 0.05);
            ctx.fillStyle = '#f5f5f5';  // White
            ctx.fillRect(width * 0.55, height * 0.3, width * 0.15, height * 0.05);
            ctx.fillStyle = '#64b5f6';  // Light blue
            ctx.fillRect(width * 0.55, height * 0.35, width * 0.15, height * 0.05);
            
            // Buildings on each side
            for (let side = 0; side < 2; side++) {
                const baseX = side === 0 ? width * 0.1 : width * 0.75;
                
                for (let i = 0; i < 3; i++) {
                    const bWidth = width * 0.12;
                    const bHeight = height * (0.15 + Math.random() * 0.2);
                    const bX = baseX + i * bWidth * 0.5;
                    
                    ctx.fillStyle = isDark ? 
                        `rgba(${60 + Math.random() * 30}, ${70 + Math.random() * 30}, ${80 + Math.random() * 30}, 0.9)` : 
                        `rgba(${180 + Math.random() * 75}, ${180 + Math.random() * 75}, ${180 + Math.random() * 75}, 0.9)`;
                    
                    ctx.fillRect(bX, height * 0.7 - bHeight, bWidth, bHeight);
                    
                    // Windows
                    ctx.fillStyle = isDark ? '#ffee58' : '#424242';
                    for (let j = 0; j < 4; j++) {
                        for (let k = 0; k < 3; k++) {
                            if (Math.random() > 0.3) {
                                ctx.fillRect(
                                    bX + bWidth * 0.2 + k * bWidth * 0.25, 
                                    height * 0.7 - bHeight + bHeight * 0.2 + j * bHeight * 0.18, 
                                    bWidth * 0.15, 
                                    bHeight * 0.1
                                );
                            }
                        }
                    }
                }
            }
        }
        
        function drawBariloche(ctx, width, height, isDark) {
            // Sky
            const skyGradient = ctx.createLinearGradient(0, 0, 0, height * 0.6);
            if (isDark) {
                skyGradient.addColorStop(0, '#1a237e');
                skyGradient.addColorStop(1, '#3949ab');
            } else {
                skyGradient.addColorStop(0, '#1e88e5');
                skyGradient.addColorStop(1, '#42a5f5');
            }
            ctx.fillStyle = skyGradient;
            ctx.fillRect(0, 0, width, height * 0.6);
            
            // Lake
            ctx.fillStyle = isDark ? '#0d47a1' : '#2196f3';
            ctx.fillRect(0, height * 0.6, width, height * 0.4);
            
            // Mountains
            ctx.fillStyle = isDark ? '#424242' : '#78909c';
            ctx.beginPath();
            ctx.moveTo(0, height * 0.6);
            ctx.lineTo(width * 0.3, height * 0.2);
            ctx.lineTo(width * 0.5, height * 0.4);
            ctx.lineTo(width * 0.7, height * 0.1);
            ctx.lineTo(width, height * 0.5);
            ctx.lineTo(width, height * 0.6);
            ctx.closePath();
            ctx.fill();
            
            // Snow peaks
            ctx.fillStyle = '#f5f5f5';
            ctx.beginPath();
            ctx.moveTo(width * 0.2, height * 0.35);
            ctx.lineTo(width * 0.3, height * 0.2);
            ctx.lineTo(width * 0.4, height * 0.3);
            ctx.closePath();
            ctx.fill();
            
            ctx.beginPath();
            ctx.moveTo(width * 0.6, height * 0.25);
            ctx.lineTo(width * 0.7, height * 0.1);
            ctx.lineTo(width * 0.8, height * 0.3);
            ctx.closePath();
            ctx.fill();
            
            // Trees along lake
            for (let i = 0; i < 15; i++) {
                const treeHeight = height * (0.05 + Math.random() * 0.05);
                const treeX = width * (0.05 + i * 0.06);
                
                ctx.fillStyle = isDark ? '#1b5e20' : '#2e7d32';
                ctx.beginPath();
                ctx.moveTo(treeX, height * 0.6);
                ctx.lineTo(treeX - treeHeight * 0.5, height * 0.6);
                ctx.lineTo(treeX, height * 0.6 - treeHeight);
                ctx.lineTo(treeX + treeHeight * 0.5, height * 0.6);
                ctx.closePath();
                ctx.fill();
            }
            
            // Small houses/cabins
            for (let i = 0; i < 5; i++) {
                const houseWidth = width * 0.08;
                const houseHeight = height * 0.05;
                const houseX = width * (0.1 + i * 0.18);
                const houseY = height * 0.6 - houseHeight;
                
                ctx.fillStyle = isDark ? '#6d4c41' : '#8d6e63';
                ctx.fillRect(houseX, houseY, houseWidth, houseHeight);
                
                // Roof
                ctx.fillStyle = isDark ? '#3e2723' : '#5d4037';
                ctx.beginPath();
                ctx.moveTo(houseX - houseWidth * 0.1, houseY);
                ctx.lineTo(houseX + houseWidth * 0.5, houseY - houseHeight * 0.7);
                ctx.lineTo(houseX + houseWidth * 1.1, houseY);
                ctx.closePath();
                ctx.fill();
                
                // Window
                ctx.fillStyle = isDark ? '#ffeb3b' : '#e3f2fd';
                ctx.fillRect(houseX + houseWidth * 0.3, houseY + houseHeight * 0.3, houseWidth * 0.3, houseHeight * 0.3);
            }
        }
        
        function drawMendoza(ctx, width, height, isDark) {
            // Sky
            const skyGradient = ctx.createLinearGradient(0, 0, 0, height * 0.5);
            if (isDark) {
                skyGradient.addColorStop(0, '#0d47a1');
                skyGradient.addColorStop(1, '#1976d2');
            } else {
                skyGradient.addColorStop(0, '#03a9f4');
                skyGradient.addColorStop(1, '#4fc3f7');
            }
            ctx.fillStyle = skyGradient;
            ctx.fillRect(0, 0, width, height * 0.5);
            
            // Mountains
            ctx.fillStyle = isDark ? '#37474f' : '#78909c';
            ctx.beginPath();
            ctx.moveTo(0, height * 0.5);
            ctx.lineTo(width * 0.2, height * 0.3);
            ctx.lineTo(width * 0.4, height * 0.4);
            ctx.lineTo(width * 0.6, height * 0.25);
            ctx.lineTo(width * 0.8, height * 0.35);
            ctx.lineTo(width, height * 0.2);
            ctx.lineTo(width, height * 0.5);
            ctx.closePath();
            ctx.fill();
            
            // Vineyards
            ctx.fillStyle = isDark ? '#33691e' : '#7cb342';
            ctx.fillRect(0, height * 0.5, width, height * 0.5);
            
            // Vineyard rows
            ctx.strokeStyle = isDark ? '#1b5e20' : '#558b2f';
            ctx.lineWidth = 2;
            for (let i = 0; i < 12; i++) {
                const y = height * (0.55 + i * 0.035);
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(width, y);
                ctx.stroke();
            }
            
            // Winery buildings
            const buildingWidth = width * 0.15;
            const buildingHeight = height * 0.1;
            const buildingX = width * 0.4;
            const buildingY = height * 0.7;
            
            // Main building
            ctx.fillStyle = isDark ? '#795548' : '#a1887f';
            ctx.fillRect(buildingX, buildingY, buildingWidth, buildingHeight);
            
            // Roof
            ctx.fillStyle = isDark ? '#5d4037' : '#8d6e63';
            ctx.beginPath();
            ctx.moveTo(buildingX - buildingWidth * 0.05, buildingY);
            ctx.lineTo(buildingX + buildingWidth * 0.5, buildingY - buildingHeight * 0.4);
            ctx.lineTo(buildingX + buildingWidth * 1.05, buildingY);
            ctx.closePath();
            ctx.fill();
            
            // Windows
            ctx.fillStyle = isDark ? '#ffcc80' : '#fafafa';
            ctx.fillRect(buildingX + buildingWidth * 0.2, buildingY + buildingHeight * 0.3, buildingWidth * 0.2, buildingHeight * 0.3);
            ctx.fillRect(buildingX + buildingWidth * 0.6, buildingY + buildingHeight * 0.3, buildingWidth * 0.2, buildingHeight * 0.3);
            
            // Vineyard paths
            ctx.fillStyle = isDark ? '#795548' : '#d7ccc8';
            ctx.fillRect(width * 0.3, height * 0.5, width * 0.05, height * 0.5);
            ctx.fillRect(width * 0.6, height * 0.5, width * 0.05, height * 0.5);
        }
        
        function drawJujuy(ctx, width, height, isDark) {
            // Sky
            const skyGradient = ctx.createLinearGradient(0, 0, 0, height * 0.4);
            if (isDark) {
                skyGradient.addColorStop(0, '#0d47a1');
                skyGradient.addColorStop(1, '#1976d2');
            } else {
                skyGradient.addColorStop(0, '#2196f3');
                skyGradient.addColorStop(1, '#64b5f6');
            }
            ctx.fillStyle = skyGradient;
            ctx.fillRect(0, 0, width, height * 0.4);
            
            // Colored mountains (Cerro de los 7 colores)
            const mountainColors = isDark ? 
                ['#880e4f', '#4a148c', '#1a237e', '#006064', '#1b5e20', '#bf360c', '#3e2723'] :
                ['#f06292', '#ba68c8', '#7986cb', '#4dd0e1', '#81c784', '#ffb74d', '#a1887f'];
            
            // Draw multiple colored layers
            for (let i = 0; i < mountainColors.length; i++) {
                ctx.fillStyle = mountainColors[i];
                ctx.beginPath();
                
                const heightFactor = 0.4 + i * 0.08;
                const amplitudeFactor = 0.1 - i * 0.01;
                
                ctx.moveTo(0, height * heightFactor);
                
                for (let x = 0; x <= width; x += width / 10) {
                    const y = height * (heightFactor + Math.sin(x * 0.05) * amplitudeFactor);
                    ctx.lineTo(x, y);
                }
                
                ctx.lineTo(width, height);
                ctx.lineTo(0, height);
                ctx.closePath();
                ctx.fill();
            }
            
            // Small town/village at the base
            for (let i = 0; i < 8; i++) {
                const houseWidth = width * 0.07;
                const houseHeight = height * 0.05;
                const houseX = width * (0.1 + i * 0.1);
                const houseY = height * 0.85 - houseHeight;
                
                // House
                ctx.fillStyle = i % 2 === 0 ? 
                    (isDark ? '#e0e0e0' : '#f5f5f5') : 
                    (isDark ? '#ffeb3b' : '#fff59d');
                ctx.fillRect(houseX, houseY, houseWidth, houseHeight);
                
                // Roof
                ctx.fillStyle = isDark ? '#5d4037' : '#8d6e63';
                ctx.beginPath();
                ctx.moveTo(houseX - houseWidth * 0.1, houseY);
                ctx.lineTo(houseX + houseWidth * 0.5, houseY - houseHeight * 0.5);
                ctx.lineTo(houseX + houseWidth * 1.1, houseY);
                ctx.closePath();
                ctx.fill();
                
                // Door
                ctx.fillStyle = isDark ? '#4e342e' : '#6d4c41';
                ctx.fillRect(houseX + houseWidth * 0.3, houseY + houseHeight * 0.4, houseWidth * 0.3, houseHeight * 0.6);
            }
            
            // Cacti
            for (let i = 0; i < 5; i++) {
                const cactusX = width * (0.2 + i * 0.15);
                const cactusY = height * 0.75;
                const cactusHeight = height * 0.08;
                
                ctx.fillStyle = isDark ? '#2e7d32' : '#43a047';
                
                // Main trunk
                ctx.fillRect(cactusX, cactusY - cactusHeight, width * 0.02, cactusHeight);
                
                // Arms
                if (i % 2 === 0) {
                    ctx.fillRect(cactusX - width * 0.03, cactusY - cactusHeight * 0.7, width * 0.03, width * 0.01);
                    ctx.fillRect(cactusX - width * 0.03, cactusY - cactusHeight * 0.7, width * 0.01, cactusHeight * 0.3);
                } else {
                    ctx.fillRect(cactusX, cactusY - cactusHeight * 0.6, width * 0.03, width * 0.01);
                    ctx.fillRect(cactusX + width * 0.02, cactusY - cactusHeight * 0.6, width * 0.01, cactusHeight * 0.25);
                }
            }
        }
        
        function drawIguazu(ctx, width, height, isDark) {
            // Sky
            const skyGradient = ctx.createLinearGradient(0, 0, 0, height * 0.4);
            if (isDark) {
                skyGradient.addColorStop(0, '#1a237e');
                skyGradient.addColorStop(1, '#283593');
            } else {
                skyGradient.addColorStop(0, '#039be5');
                skyGradient.addColorStop(1, '#29b6f6');
            }
            ctx.fillStyle = skyGradient;
            ctx.fillRect(0, 0, width, height * 0.4);
            
            // Jungle background
            ctx.fillStyle = isDark ? '#1b5e20' : '#2e7d32';
            ctx.fillRect(0, height * 0.4, width, height * 0.1);
            
            // Waterfall cliff top
            ctx.fillStyle = isDark ? '#5d4037' : '#8d6e63';
            ctx.fillRect(0, height * 0.5, width, height * 0.02);
            
            // Main waterfall body
            ctx.fillStyle = isDark ? '#0d47a1' : '#2196f3';
            ctx.fillRect(0, height * 0.52, width, height * 0.3);
            
            // Mist at the base
            const mistGradient = ctx.createLinearGradient(0, height * 0.82, 0, height);
            if (isDark) {
                mistGradient.addColorStop(0, '#e3f2fd');
                mistGradient.addColorStop(1, '#0d47a1');
            } else {
                mistGradient.addColorStop(0, '#e3f2fd');
                mistGradient.addColorStop(1, '#2196f3');
            }
            ctx.fillStyle = mistGradient;
            ctx.fillRect(0, height * 0.82, width, height * 0.18);
            
            // Water streams
            ctx.strokeStyle = isDark ? '#e3f2fd' : '#e1f5fe';
            ctx.lineWidth = 2;
            
            for (let i = 0; i < 20; i++) {
                ctx.beginPath();
                const startX = width * (0.05 + i * 0.05);
                ctx.moveTo(startX, height * 0.52);
                
                // Create a wavy line for the waterfall
                for (let y = height * 0.52; y < height * 0.82; y += height * 0.02) {
                    const amplitude = width * 0.015;
                    const x = startX + Math.sin((y - height * 0.52) * 0.1) * amplitude;
                    ctx.lineTo(x, y);
                }
                
                ctx.stroke();
            }
            
            // Jungle trees on sides
            for (let side = 0; side < 2; side++) {
                const basex = side === 0 ? width * 0.05 : width * 0.85;
                
                for (let i = 0; i < 3; i++) {
                    const treeX = basex + (side === 0 ? i * width * 0.03 : -i * width * 0.03);
                    const treeHeight = height * (0.15 + i * 0.02);
                    
                    // Tree trunk
                    ctx.fillStyle = isDark ? '#4e342e' : '#6d4c41';
                    ctx.fillRect(treeX, height * 0.4 - treeHeight * 0.3, width * 0.01, treeHeight * 0.3);
                    
                    // Tree foliage
                    ctx.fillStyle = isDark ? '#33691e' : '#558b2f';
                    ctx.beginPath();
                    ctx.arc(treeX + width * 0.005, height * 0.4 - treeHeight * 0.3, treeHeight * 0.15, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
        }
        
        function drawArgentina(ctx, width, height, isDark) {
            // Background
            ctx.fillStyle = isDark ? '#263238' : '#e3f2fd';
            ctx.fillRect(0, 0, width, height);
            
            // Argentina flag stripes
            ctx.fillStyle = '#64b5f6';  // Light blue
            ctx.fillRect(0, 0, width, height * 0.33);
            ctx.fillStyle = '#f5f5f5';  // White
            ctx.fillRect(0, height * 0.33, width, height * 0.34);
            ctx.fillStyle = '#64b5f6';  // Light blue
            ctx.fillRect(0, height * 0.67, width, height * 0.33);
            
            // Sun emblem
            const centerX = width / 2;
            const centerY = height / 2;
            const radius = Math.min(width, height) * 0.12;
            
            // Sun center
            ctx.fillStyle = '#ffca28';
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
            ctx.fill();
            
            // Sun face
            if (!isDark) {
                ctx.fillStyle = '#f57f17';
                // Eyes
                ctx.beginPath();
                ctx.arc(centerX - radius * 0.3, centerY - radius * 0.2, radius * 0.1, 0, Math.PI * 2);
                ctx.arc(centerX + radius * 0.3, centerY - radius * 0.2, radius * 0.1, 0, Math.PI * 2);
                ctx.fill();
                
                // Smile
                ctx.beginPath();
                ctx.arc(centerX, centerY + radius * 0.1, radius * 0.4, 0.1 * Math.PI, 0.9 * Math.PI, false);
                ctx.lineWidth = radius * 0.1;
                ctx.stroke();
            }
            
            // Sun rays
            ctx.fillStyle = '#ffca28';
            for (let i = 0; i < 16; i++) {
                const angle = i * Math.PI / 8;
                ctx.save();
                ctx.translate(centerX, centerY);
                ctx.rotate(angle);
                ctx.fillRect(0, -radius * 0.15, radius * 0.8, radius * 0.3);
                ctx.restore();
            }
        }
        
        // Update images when theme changes
        function updateCanvasImages() {
            // Initial city images
            drawCityImage('ba-canvas');
            drawCityImage('rosario-canvas');
            drawCityImage('bariloche-canvas');
            
            // If more city images were loaded
            moreCities.forEach(city => {
                drawCityImage(city.id);
            });
        }
        
        // Add keyboard handler for pressing Enter on AI prompt
        document.getElementById('ai-prompt').addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                document.getElementById('ask-ai').click();
            }
        });
        
        // Draw initial city images
        updateCanvasImages();
        
        // Try to load saved packing list
        loadPackingList();
        
        // Add checkbox change listener to save state
        document.querySelectorAll('#packing-list input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', savePackingList);
        });
    </script>


</body></html>