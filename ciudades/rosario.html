<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title data-i18n="page-title">Rosario | Viaje Familiar a Argentina</title>
  <link rel="stylesheet" href="estilos.css">
  <style>
    /* Estilos generales del cuerpo y barra superior */
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      color: #333;
      margin: 20px;
      transition: direction 0.3s;
    }
    #language-selector {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
      background-color: rgba(255,255,255,0.8);
      padding: 5px;
      border-radius: 5px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      display: flex; /* Para alinear los botones de idioma y moneda */
      align-items: center;
      gap: 10px; /* Espacio entre elementos */
    }
    .language-btn, .currency-btn { /* Clase unificada para botones de control */
      font-weight: bold;
      padding: 8px 12px;
      margin: 0 2px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      background-color: #f0f0f0;
    }
    .language-btn.active, .currency-btn.active {
      background: #e6eaff;
      border-color: #6d7fc9;
      font-weight: bold;
    }
    .back-link {
      margin-left: 20px;
      text-decoration: none;
      font-weight: bold;
      color: #007BFF;
    }
    /* Estilos para la foto de la ciudad */
    .ciudad-foto {
      width: 100%;
      max-width: 700px;
      height: auto;
      display: block;
      margin: 30px auto 20px auto;
      border-radius: 14px;
      box-shadow: 0 3px 16px rgba(0,0,0,0.15);
    }
    .foto-caption {
      text-align: center;
      color: #555;
      font-size: 1em;
      margin-bottom: 30px;
    }
    h1, h2, h3 { /* Agregado h3 para subsecciones */
      color: #0F4761;
    }
    ul {
      margin-bottom: 20px;
      padding-left: 25px; /* Ajuste para listas */
    }
    ul li {
      margin-bottom: 5px;
    }
    iframe {
      border: 1px solid black;
      width: 100%; /* Asegura que el mapa sea responsive */
      max-width: 700px; /* Limita el ancho máximo del mapa */
      display: block;
      margin: 20px auto; /* Centra el mapa */
    }
    /* Estilos para tablas añadidas */
    table {
      border-collapse: collapse;
      width: 100%;
      max-width: 700px; /* Limita el ancho máximo de las tablas */
      margin: 20px auto; /* Centra la tabla */
      background: #f7fbff;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      border-radius: 8px;
      overflow: hidden; /* Para que los bordes redondeados se apliquen bien */
    }
    th, td {
      border: 1px solid #b3c7e6;
      padding: 10px 15px;
      text-align: left;
      font-size: 16px;
    }
    th {
      background: #e6f0fa;
      font-weight: bold;
    }
    .rtl {
      direction: rtl !important;
      text-align: right !important;
    }
    .rtl ul {
      padding-right: 25px;
      padding-left: 0;
    }

    /* Estilos para las secciones de IA */
    .ai-section {
      background: #e6f0fa;
      padding: 20px;
      border-radius: 8px;
      margin: 30px auto;
      max-width: 700px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .ai-section h2 {
      color: #2176d2;
      margin-top: 0;
    }
    .ai-button {
      background-color: #4CAF50; /* Green */
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s ease;
      display: block; /* Para que ocupe todo el ancho y se centre */
      margin: 15px auto;
      max-width: 300px;
    }
    .ai-button:hover {
      background-color: #45a049;
    }
    .ai-button:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
    }
    .ai-response {
      margin-top: 20px;
      padding: 15px;
      background-color: #ffffff;
      border: 1px solid #d0e0f0;
      border-radius: 5px;
      white-space: pre-wrap; /* Para preservar saltos de línea del LLM */
      font-size: 15px;
      line-height: 1.6;
      min-height: 50px; /* Para que no se colapse */
    }
    .ai-loading {
      text-align: center;
      font-style: italic;
      color: #666;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div id="language-selector">
    <span data-i18n="idioma">Idioma:</span>
    <button onclick="translatePage('es')" class="language-btn" id="btn-es">Español</button>
    <button onclick="translatePage('he')" class="language-btn" id="btn-he">עברית</button>
    <span data-i18n="moneda">Moneda:</span>
    <button id="btn-ars" onclick="cambiarMoneda('ARS')" class="currency-btn">ARS</button>
    <button id="btn-usd" onclick="cambiarMoneda('USD')" class="currency-btn">USD</button>
    <button id="btn-ils" onclick="cambiarMoneda('ILS')" class="currency-btn">ILS</button>
    <a href="../index.html" class="back-link" id="back-link" data-i18n="back-link">⬅ Volver al itinerario</a>
  </div>

  <img src="../docs/imagenes/rosario/rosario.jpg"
       alt="Monumento a la Bandera en Rosario"
       class="ciudad-foto" id="city-photo" onerror="this.src='https://placehold.co/700x400/cccccc/333333?text=Imagen+Rosario'">
  <div class="foto-caption" id="foto-caption" data-i18n="foto-caption">Monumento a la Bandera en Rosario</div>

  <h1 id="city-title" data-i18n="city-title">Rosario</h1>
  <p id="welcome-text" data-i18n="welcome-text">Rosario, la ciudad de la bandera, ofrece una rica historia, parques extensos y una vibrante vida cultural a orillas del río Paraná. Es ideal para disfrutar en familia con actividades al aire libre y visitas a sitios emblemáticos.</p>

  <h2 data-i18n="dates-duration-title">Fechas y duración</h2>
  <ul>
    <li data-i18n="stay-duration">**Estadía**: 02/10 al 05/10 (4 días)</li>
    <li data-i18n="how-to-arrive">**Cómo llegar**: Vuelo desde Buenos Aires / Bus de larga distancia</li>
  </ul>

  <h2 id="main-attractions-title" data-i18n="main-attractions-title">Lugares imperdibles</h2>
  <ul id="main-attractions-list">
    <li><a href="https://es.wikipedia.org/wiki/Monumento_Nacional_a_la_Bandera" target="_blank" id="attraction-0" data-i18n="attraction-0">Monumento Nacional a la Bandera</a></li>
    <li><a href="https://es.wikipedia.org/wiki/Parque_de_la_Independencia_(Rosario)" target="_blank" id="attraction-1" data-i18n="attraction-1">Parque de la Independencia</a></li>
    <li><a href="https://www.rosario.tur.ar/costanera/" target="_blank" id="attraction-2" data-i18n="attraction-2">Costanera del Río Paraná</a></li>
    <li><a href="https://www.rosario.gob.ar/web/servicios/cultura/museos-y-centros-culturales/la-isla-de-los-inventos" target="_blank" id="attraction-3" data-i18n="attraction-3">Isla de los Inventos</a></li>
    <li><a href="https://www.rosario.gob.ar/web/servicios/cultura/museos-y-centros-culturales/museo-de-ciencias-naturales-dr-angel-gallardo" target="_blank" id="attraction-4" data-i18n="attraction-4">Museo de Ciencias Naturales "Dr. Ángel Gallardo"</a></li>
    <li><a href="https://es.wikipedia.org/wiki/Bulevar_Oro%C3%B1o" target="_blank" id="attraction-5" data-i18n="attraction-5">Boulevard Oroño</a></li>
  </ul>

  <h2 data-i18n="recommended-activities-title">Actividades recomendadas</h2>
  <ul>
    <li data-i18n="rec-activity-0">Visitar el Monumento a la Bandera y subir a su mirador.</li>
    <li data-i18n="rec-activity-1">Paseos en barco por el Río Paraná y sus islas.</li>
    <li data-i18n="rec-activity-2">Alquilar bicicletas para recorrer la Costanera y los parques.</li>
    <li data-i18n="rec-activity-3">Actividades recreativas en la Isla de los Inventos o la Granja de la Infancia.</li>
    <li data-i18n="rec-activity-4">Disfrutar de un picnic en los grandes parques de la ciudad.</li>
    <li data-i18n="rec-activity-5">Visitas a museos adaptados para niños.</li>
  </ul>

  <h2 data-i18n="gastronomy-title">Gastronomía destacada</h2>
  <p data-i18n="gastronomy-intro">Rosario es conocida por su gastronomía variada, con opciones que van desde las tradicionales parrillas y la carne a la estaca, hasta platos de pescado de río fresco y una creciente oferta de cocina moderna y saludable.</p>
  <h3 data-i18n="restaurants-title">Restaurantes recomendados</h3>
  <table>
    <thead>
      <tr>
        <th data-i18n="table-restaurant">Restaurante</th>
        <th data-i18n="table-type">Tipo</th>
        <th data-i18n="table-gluten-free">Sin Gluten</th>
        <th data-i18n="table-sugar-free">Sin Azúcar</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a href="https://www.tripadvisor.com.ar/Restaurant_Review-g312803-d10103700-Reviews-Don_Ferro-Rosario_Province_of_Santa_Fe_Central_Argentina.html" target="_blank">Don Ferro</a></td>
        <td data-i18n="restaurant-type-0">Parrilla con vista al río</td>
        <td data-i18n="yes-symbol">✔️</td>
        <td data-i18n="no-symbol">❌</td>
      </tr>
      <tr>
        <td><a href="https://www.rockandfellers.com.ar/" target="_blank">Rock & Feller's</a></td>
        <td data-i18n="restaurant-type-1">Americano / Familiar</td>
        <td data-i18n="yes-symbol">✔️</td>
        <td data-i18n="no-symbol">❌</td>
      </tr>
      <tr>
        <td><a href="https://www.tripadvisor.com.ar/Restaurant_Review-g312803-d10848099-Reviews-Chinchibira-Rosario_Province_of_Santa_Fe_Central_Argentina.html" target="_blank">Chinchibira</a></td>
        <td data-i18n="restaurant-type-2">Cocina de autor / Fusión</td>
        <td data-i18n="yes-symbol">✔️</td>
        <td data-i18n="yes-symbol">✔️</td>
      </tr>
      <tr>
        <td><a href="https://www.tripadvisor.com.ar/Restaurant_Review-g312803-d10103700-Reviews-El_Viejo_Balcon-Rosario_Province_of_Santa_Fe_Central_Argentina.html" target="_blank">El Viejo Balcón</a></td>
        <td data-i18n="restaurant-type-3">Pescados de río</td>
        <td data-i18n="yes-symbol">✔️</td>
        <td data-i18n="no-symbol">❌</td>
      </tr>
    </tbody>
  </table>
  <h3 data-i18n="cafes-title">Confiterías y cafés</h3>
  <table>
    <thead>
      <tr>
        <th data-i18n="table-cafe">Confitería</th>
        <th data-i18n="table-type">Tipo</th>
        <th data-i18n="table-gluten-free">Sin Gluten</th>
        <th data-i18n="table-sugar-free">Sin Azúcar</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a href="https://es.wikipedia.org/wiki/Caf%C3%A9_El_Cairo" target="_blank">El Cairo</a></td>
        <td data-i18n="cafe-type-0">Histórico / Literario</td>
        <td data-i18n="no-symbol">❌</td>
        <td data-i18n="no-symbol">❌</td>
      </tr>
      <tr>
        <td><a href="https://www.gofre.com.ar/" target="_blank">Gofre</a></td>
        <td data-i18n="cafe-type-1">Waffles y pastelería</td>
        <td data-i18n="yes-symbol">✔️</td>
        <td data-i18n="yes-symbol">✔️</td>
      </tr>
      <tr>
        <td><a href="https://www.tripadvisor.com.ar/Restaurant_Review-g312803-d10103700-Reviews-Sunderland-Rosario_Province_of_Santa_Fe_Central_Argentina.html" target="_blank">Sunderland</a></td>
        <td data-i18n="cafe-type-2">Tradicional / Clásico</td>
        <td data-i18n="no-symbol">❌</td>
        <td data-i18n="no-symbol">❌</td>
      </tr>
    </tbody>
  </table>

  <div class="ai-section">
    <h2 data-i18n="ai-menu-title">Generador de Menú Saludable ✨</h2>
    <p data-i18n="ai-menu-description">Obtén sugerencias de menú para un día completo (desayuno, almuerzo, cena) adaptadas para dietas bajas en carbohidratos, aptas para diabéticos y, si es posible, sin gluten, inspiradas en la gastronomía de Rosario.</p>
    <button class="ai-button" id="generate-menu-btn" data-i18n="generate-menu-button">Generar Menú</button>
    <div class="ai-loading" id="ai-menu-loading-indicator" style="display:none;" data-i18n="ai-loading">Generando menú...</div>
    <div class="ai-response" id="ai-menu-response"></div>
  </div>

  <div class="ai-section">
    <h2 data-i18n="ai-accommodation-title">Sugerencias de Alojamiento con IA 🏨</h2>
    <p data-i18n="ai-accommodation-description">Obtén recomendaciones de alojamiento en Rosario, considerando opciones familiares, seguras y bien ubicadas.</p>
    <button class="ai-button" id="generate-accommodation-btn" data-i18n="generate-accommodation-button">Generar Sugerencias</button>
    <div class="ai-loading" id="ai-accommodation-loading-indicator" style="display:none;" data-i18n="ai-loading">Generando sugerencias...</div>
    <div class="ai-response" id="ai-accommodation-response"></div>
  </div>

  <div class="ai-section">
    <h2 data-i18n="ai-family-tips-title">Consejos Adicionales para Familias con IA 👨‍👩‍👧‍👦</h2>
    <p data-i18n="ai-family-tips-description">Recibe consejos personalizados para disfrutar Rosario en familia, incluyendo actividades, seguridad y logística.</p>
    <button class="ai-button" id="generate-family-tips-btn" data-i18n="generate-family-tips-button">Generar Consejos</button>
    <div class="ai-loading" id="ai-family-tips-loading-indicator" style="display:none;" data-i18n="ai-loading">Generando consejos...</div>
    <div class="ai-response" id="ai-family-tips-response"></div>
  </div>

  <div class="ai-section">
    <h2 data-i18n="ai-budget-title">Análisis de Presupuesto con IA 💰</h2>
    <p data-i18n="ai-budget-description">Obtén un análisis y desglose del presupuesto orientativo para tu estadía en Rosario, con posibles optimizaciones.</p>
    <button class="ai-button" id="generate-budget-btn" data-i18n="generate-budget-button">Analizar Presupuesto</button>
    <div class="ai-loading" id="ai-budget-loading-indicator" style="display:none;" data-i18n="ai-loading">Analizando presupuesto...</div>
    <div class="ai-response" id="ai-budget-response"></div>
  </div>

  <h2 data-i18n="accommodation-title">Alojamiento (ejemplos)</h2>
  <ul>
    <li data-i18n="accommodation-0">Ros Tower Hotel</li>
    <li data-i18n="accommodation-1">Esplendor by Wyndham Savoy Rosario</li>
    <li data-i18n="accommodation-2">Apartamentos en el centro o cerca de la Costanera</li>
    <li data-i18n="accommodation-3">Airbnb en barrios residenciales como Fisherton o Pichincha</li>
  </ul>

  <h2 data-i18n="coordinates-title">Coordenadas aproximadas</h2>
  <p data-i18n="coordinates-text">32° 57' S 60° 38' O</p>

  <h2 data-i18n="events-agenda-title">Agenda de eventos</h2>
  <ul>
    <li data-i18n="event-0">**(Consultar agenda local)**: Rosario tiene una activa vida cultural con festivales, ferias y espectáculos.</li>
    <li data-i18n="event-1">**(Consultar agenda local)**: Eventos deportivos o musicales en el Parque de la Independencia.</li>
    <li><a href="../docs/agenda/ariflier1970@gmail.com.ical.zip" target="_blank" data-i18n="download-agenda">Descargar agenda completa en formato iCal (.zip)</a></li>
  </ul>

  <h2 data-i18n="family-tips-title">Consejos para familias</h2>
  <ul>
    <li data-i18n="family-tip-0">Aprovechen los amplios espacios verdes y la costanera para actividades al aire libre.</li>
    <li data-i18n="family-tip-1">El transporte público es eficiente (tarjeta MOVI).</li>
    <li data-i18n="family-tip-2">La ciudad es segura en las zonas turísticas y céntricas.</li>
    <li data-i18n="family-tip-3">Consideren un paseo en barco para ver la ciudad desde el río.</li>
    <li data-i18n="family-tip-4">En la Costanera hay muchas opciones de restaurantes con juegos para niños.</li>
  </ul>

  <h2 data-i18n="budget-title">Presupuesto orientativo</h2>
  <table>
    <thead>
      <tr>
        <th data-i18n="budget-concept">Concepto</th>
        <th data-i18n="budget-price">Precio estimado (USD)</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td data-i18n="budget-concept-0">Alojamiento (noche, familia)</td>
        <td data-i18n="budget-price-0">50–120</td>
      </tr>
      <tr>
        <td data-i18n="budget-concept-1">Comida (por día, familia)</td>
        <td data-i18n="budget-price-1">30–70</td>
      </tr>
      <tr>
        <td data-i18n="budget-concept-2">Transporte público (por día)</td>
        <td data-i18n="budget-price-2">3–5</td>
      </tr>
      <tr>
        <td data-i18n="budget-concept-3">Actividades y tours (por día)</td>
        <td data-i18n="budget-price-3">20–50</td>
      </tr>
      <tr>
        <td data-i18n="budget-concept-4">Entradas museos/atracciones</td>
        <td data-i18n="budget-price-4">0–15</td>
      </tr>
    </tbody>
  </table>

  <h2 data-i18n="cultural-tips-title">Tips culturales</h2>
  <ul>
    <li data-i18n="cultural-tip-0">El "Che" Guevara nació cerca de Rosario.</li>
    <li data-i18n="cultural-tip-1">Rosario es cuna de grandes futbolistas (Messi, Di María) y artistas.</li>
    <li data-i18n="cultural-tip-2">La siesta es común en las horas centrales del día, afectando horarios comerciales.</li>
    <li data-i18n="cultural-tip-3">Los rosarinos son conocidos por su hospitalidad.</li>
  </ul>

  <h2 id="map-title" data-i18n="map-title">Mapa de Rosario</h2>
  <iframe src="https://www.openstreetmap.org/export/embed.html?bbox=-60.75%2C-33.00%2C-60.55%2C-32.80&amp;layer=mapnik" width="100%" height="350"></iframe>
  <br><small><a href="https://www.openstreetmap.org/#map=12/-32.944/-60.655" target="_blank" id="see-bigger-map" data-i18n="see-bigger-map">Ver mapa más grande</a></small>

  <script>
    // Diccionario de traducciones español ↔ hebreo
    const translations = {
      es: {
        "page-title": "Rosario | Viaje Familiar a Argentina",
        "idioma": "Idioma:",
        "moneda": "Moneda:",
        "city-title": "Rosario",
        "welcome-text": "Rosario, la ciudad de la bandera, ofrece una rica historia, parques extensos y una vibrante vida cultural a orillas del río Paraná. Es ideal para disfrutar en familia con actividades al aire libre y visitas a sitios emblemáticos.",
        "foto-caption": "Monumento a la Bandera en Rosario",
        "dates-duration-title": "Fechas y duración",
        "stay-duration": "**Estadía**: 02/10 al 05/10 (4 días)",
        "how-to-arrive": "**Cómo llegar**: Vuelo desde Buenos Aires / Bus de larga distancia",
        "main-attractions-title": "Lugares imperdibles",
        "attraction-0": "Monumento Nacional a la Bandera",
        "attraction-1": "Parque de la Independencia",
        "attraction-2": "Costanera del Río Paraná",
        "attraction-3": "Isla de los Inventos",
        "attraction-4": "Museo de Ciencias Naturales \"Dr. Ángel Gallardo\"",
        "attraction-5": "Boulevard Oroño",
        "recommended-activities-title": "Actividades recomendadas",
        "rec-activity-0": "Visitar el Monumento a la Bandera y subir a su mirador.",
        "rec-activity-1": "Paseos en barco por el Río Paraná y sus islas.",
        "rec-activity-2": "Alquilar bicicletas para recorrer la Costanera y los parques.",
        "rec-activity-3": "Actividades recreativas en la Isla de los Inventos o la Granja de la Infancia.",
        "rec-activity-4": "Disfrutar de un picnic en los grandes parques de la ciudad.",
        "rec-activity-5": "Visitas a museos adaptados para niños.",
        "gastronomy-title": "Gastronomía destacada",
        "gastronomy-intro": "Rosario es conocida por su gastronomía variada, con opciones que van desde las tradicionales parrillas y la carne a la estaca, hasta platos de pescado de río fresco y una creciente oferta de cocina moderna y saludable.",
        "restaurants-title": "Restaurantes recomendados",
        "table-restaurant": "Restaurante",
        "table-type": "Tipo",
        "table-gluten-free": "Sin Gluten",
        "table-sugar-free": "Sin Azúcar",
        "restaurant-type-0": "Parrilla con vista al río",
        "restaurant-type-1": "Americano / Familiar",
        "restaurant-type-2": "Cocina de autor / Fusión",
        "restaurant-type-3": "Pescados de río",
        "cafes-title": "Confiterías y cafés",
        "table-cafe": "Confitería",
        "cafe-type-0": "Histórico / Literario",
        "cafe-type-1": "Waffles y pastelería",
        "cafe-type-2": "Tradicional / Clásico",
        "yes-symbol": "✔️",
        "no-symbol": "❌",
        "ai-menu-title": "Generador de Menú Saludable ✨",
        "ai-menu-description": "Obtén sugerencias de menú para un día completo (desayuno, almuerzo, cena) adaptadas para dietas bajas en carbohidratos, aptas para diabéticos y, si es posible, sin gluten, inspiradas en la gastronomía de Rosario.",
        "generate-menu-button": "Generar Menú",
        "ai-loading": "Generando menú...",
        "ai-error": "Error al generar el menú. Por favor, inténtalo de nuevo más tarde.",
        "ai-menu-prompt": "Genera un plan de menú de un día (desayuno, almuerzo, cena) para una familia que visita Rosario, Argentina. Las opciones deben ser aptas para diabéticos, bajas en carbohidratos y, si es posible, sin gluten. Incluye ejemplos de platos típicos argentinos adaptados a estas restricciones dietéticas. Formatea la respuesta en párrafos claros para cada comida.",
        "ai-accommodation-title": "Sugerencias de Alojamiento con IA 🏨",
        "ai-accommodation-description": "Obtén recomendaciones de alojamiento en Rosario, considerando opciones familiares, seguras y bien ubicadas.",
        "generate-accommodation-button": "Generar Sugerencias",
        "ai-accommodation-prompt": "Genera 3-5 sugerencias de alojamiento en Rosario, Argentina, ideales para una familia con 2 hijos. Considera opciones seguras, bien ubicadas y con servicios adecuados para familias (ej. piscina, cocina, áreas de juego). Incluye diferentes tipos de alojamiento como hoteles, apartamentos o Airbnb. Formatea la respuesta con viñetas.",
        "ai-family-tips-title": "Consejos Adicionales para Familias con IA 👨‍👩‍👧‍👦",
        "ai-family-tips-description": "Recibe consejos personalizados para disfrutar Rosario en familia, incluyendo actividades, seguridad y logística.",
        "generate-family-tips-button": "Generar Consejos",
        "ai-family-tips-prompt": "Proporciona 5 consejos prácticos y personalizados para una familia con niños que visita Rosario, Argentina. Los consejos deben cubrir aspectos como actividades para niños, seguridad en la ciudad, opciones de transporte familiar, y cómo aprovechar al máximo la estadía. Formatea la respuesta con viñetas.",
        "ai-budget-title": "Análisis de Presupuesto con IA 💰",
        "ai-budget-description": "Obtén un análisis y desglose del presupuesto orientativo para tu estadía en Rosario, con posibles optimizaciones.",
        "generate-budget-button": "Analizar Presupuesto",
        "ai-budget-prompt": "Analiza el siguiente presupuesto orientativo para una familia en Rosario (USD): Alojamiento (noche): 50-120, Comida (día): 30-70, Transporte (día): 3-5, Actividades (día): 20-50, Entradas: 0-15. Proporciona un desglose estimado por día y por categoría, y sugiere 2-3 formas de optimizar o ahorrar en este presupuesto sin sacrificar la experiencia familiar. Formatea la respuesta en párrafos.",
        "accommodation-title": "Alojamiento (ejemplos)",
        "accommodation-0": "Ros Tower Hotel",
        "accommodation-1": "Esplendor by Wyndham Savoy Rosario",
        "accommodation-2": "Apartamentos en el centro o cerca de la Costanera",
        "accommodation-3": "Airbnb en barrios residenciales como Fisherton o Pichincha",
        "coordinates-title": "Coordenadas aproximadas",
        "coordinates-text": "32° 57' S 60° 38' O",
        "events-agenda-title": "Agenda de eventos",
        "event-0": "**(Consultar agenda local)**: Rosario tiene una activa vida cultural con festivales, ferias y espectáculos.",
        "event-1": "**(Consultar agenda local)**: Eventos deportivos o musicales en el Parque de la Independencia.",
        "download-agenda": "Descargar agenda completa en formato iCal (.zip)",
        "family-tips-title": "Consejos para familias",
        "family-tip-0": "Aprovechen los amplios espacios verdes y la costanera para actividades al aire libre.",
        "family-tip-1": "El transporte público es eficiente (tarjeta MOVI).",
        "family-tip-2": "La ciudad es segura en las zonas turísticas y céntricas.",
        "family-tip-3": "Consideren un paseo en barco para ver la ciudad desde el río.",
        "family-tip-4": "En la Costanera hay muchas opciones de restaurantes con juegos para niños.",
        "budget-title": "Presupuesto orientativo",
        "budget-concept": "Concepto",
        "budget-price": "Precio estimado (USD)",
        "budget-concept-0": "Alojamiento (noche, familia)",
        "budget-price-0": "50–120",
        "budget-concept-1": "Comida (por día, familia)",
        "budget-price-1": "30–70",
        "budget-concept-2": "Transporte público (por día)",
        "budget-price-2": "3–5",
        "budget-concept-3": "Actividades y tours (por día)",
        "budget-price-3": "20–50",
        "budget-concept-4": "Entradas museos/atracciones",
        "budget-price-4": "0–15",
        "cultural-tips-title": "Tips culturales",
        "cultural-tip-0": "El \"Che\" Guevara nació cerca de Rosario.",
        "cultural-tip-1": "Rosario es cuna de grandes futbolistas (Messi, Di María) y artistas.",
        "cultural-tip-2": "La siesta es común en las horas centrales del día, afectando horarios comerciales.",
        "cultural-tip-3": "Los rosarinos son conocidos por su hospitalidad.",
        "map-title": "Mapa de Rosario",
        "see-bigger-map": "Ver mapa más grande",
        "back-link": "⬅ Volver al itinerario"
      },
      he: {
        "page-title": "רוסאריו | טיול משפחתי בארגנטינה",
        "idioma": "שפה:",
        "moneda": "מטבע:",
        "city-title": "רוסאריו",
        "welcome-text": "רוסאריו, עיר הדגל, מציעה היסטוריה עשירה, פארקים נרחבים וחיי תרבות תוססים על גדות נהר הפאראנה. היא אידיאלית לבילוי משפחתי עם פעילויות בחיק הטבע וביקורים באתרים איקוניים.",
        "foto-caption": "אנדרטת הדגל ברוסאריו",
        "dates-duration-title": "תאריכים ומשך שהייה",
        "stay-duration": "**שהייה**: 02/10 עד 05/10 (4 ימים)",
        "how-to-arrive": "**איך מגיעים**: טיסה מבואנוס איירס / אוטובוס למרחקים ארוכים",
        "main-attractions-title": "מקומות שאסור לפספס",
        "attraction-0": "האנדרטה הלאומית לדגל",
        "attraction-1": "פארק העצמאות",
        "attraction-2": "טיילת נהר הפאראנה",
        "attraction-3": "אי ההמצאות",
        "attraction-4": "מוזיאון למדעי הטבע \"ד\"ר אנחל גאיירדו\"",
        "attraction-5": "שדרת אורוניו",
        "recommended-activities-title": "פעילויות מומלצות",
        "rec-activity-0": "לבקר באנדרטת הדגל ולעלות לתצפית.",
        "rec-activity-1": "שיט בסירה בנהר הפאראנה ובאיים שלו.",
        "rec-activity-2": "לשכור אופניים ולרכוב לאורך הטיילת והפארקים.",
        "rec-activity-3": "פעילויות פנאי באי ההמצאות או בחוות הילדות.",
        "rec-activity-4": "ליהנות מפיקניק בפארקים הגדולים של העיר.",
        "rec-activity-5": "ביקורים במוזיאונים המותאמים לילדים.",
        "gastronomy-title": "גסטרונומיה מומלצת",
        "gastronomy-intro": "רוסאריו ידועה במטבח המגוון שלה, עם אפשרויות הנעות ממסעדות בשרים מסורתיות ובשר על שיפוד, ועד מנות דגים טריים מהנהר והיצע הולך וגדל של מטבח מודרני ובריא.",
        "restaurants-title": "מסעדות מומלצות",
        "table-restaurant": "מסעדה",
        "table-type": "סוג",
        "table-gluten-free": "ללא גלוטן",
        "table-sugar-free": "ללא סוכר",
        "restaurant-type-0": "מסעדת בשרים עם נוף לנהר",
        "restaurant-type-1": "אמריקאי / משפחתי",
        "restaurant-type-2": "מטבח שף / פיוז'ן",
        "restaurant-type-3": "דגי נהר",
        "cafes-title": "קונדיטוריות ובתי קפה",
        "table-cafe": "קונדיטוריה",
        "cafe-type-0": "היסטורי / ספרותי",
        "cafe-type-1": "וופלים ומאפים",
        "cafe-type-2": "מסורתי / קלאסי",
        "yes-symbol": "✔️",
        "no-symbol": "❌",
        "ai-menu-title": "מחולל תפריט בריא ✨",
        "ai-menu-description": "קבלו הצעות לתפריט יומי (ארוחת בוקר, צהריים, ערב) המותאמות לדיאטות דלות פחמימות, מתאימות לסוכרתיים, ואם אפשר, ללא גלוטן, בהשראת הגסטרונומיה של רוסאריו.",
        "generate-menu-button": "צור תפריט",
        "ai-loading": "מייצר תפריט...",
        "ai-error": "שגיאה ביצירת התפריט. אנא נסו שוב מאוחר יותר.",
        "ai-menu-prompt": "צור תוכנית תפריט יומית (ארוחת בוקר, צהריים, ערב) למשפחה המבקרת ברוסאריו, ארגנטינה. האפשרויות צריכות להיות מתאימות לסוכרתיים, דלות פחמימות, ואם אפשר, ללא גלוטן. כלול דוגמאות למנות ארגנטינאיות טיפוסיות המותאמות למגבלות תזונתיות אלו. פרמט את התשובה בפסקאות ברורות לכל ארוחה.",
        "ai-accommodation-title": "הצעות לינה עם AI 🏨",
        "ai-accommodation-description": "קבלו המלצות לינה ברוסאריו, תוך התחשבות באפשרויות ידידותיות למשפחות, בטוחות וממוקמות היטב.",
        "generate-accommodation-button": "צור הצעות",
        "ai-accommodation-prompt": "צור 3-5 הצעות לינה ברוסאריו, ארגנטינה, אידיאליות למשפחה עם 2 ילדים. קח בחשבון אפשרויות בטוחות, ממוקמות היטב ועם שירותים מתאימים למשפחות (למשל, בריכה, מטבח, אזורי משחק). כלול סוגי לינה שונים כמו בתי מלון, דירות או Airbnb. פרמט את התשובה עם נקודות.",
        "ai-family-tips-title": "טיפים נוספים למשפחות עם AI 👨‍👩‍👧‍👦",
        "ai-family-tips-description": "קבלו טיפים מותאמים אישית לבילוי ברוסאריו עם המשפחה, כולל פעילויות, בטיחות ולוגיסטיקה.",
        "generate-family-tips-button": "צור טיפים",
        "ai-family-tips-prompt": "ספק 5 טיפים מעשיים ומותאמים אישית למשפחה עם ילדים המבקרת ברוסאריו, ארגנטינה. הטיפים צריכים לכסות היבטים כמו פעילויות לילדים, בטיחות בעיר, אפשרויות תחבורה משפחתיות וכיצד להפיק את המרב מהשהייה. פרמט את התשובה עם נקודות.",
        "ai-budget-title": "ניתוח תקציב עם AI �",
        "ai-budget-description": "קבלו ניתוח ופירוט של התקציב המשוער לשהותכם ברוסאריו, עם אופטימיזציות אפשריות.",
        "generate-budget-button": "נתח תקציב",
        "ai-budget-prompt": "נתח את התקציב המשוער הבא למשפחה ברוסאריו (USD): לינה (לילה): 50-120, אוכל (יום): 30-70, תחבורה (יום): 3-5, פעילויות (יום): 20-50, כניסות: 0-15. ספק פירוט משוער ליום ולפי קטגוריה, והצע 2-3 דרכים לייעל או לחסוך בתקציב זה מבלי לוותר על החוויה המשפחתית. פרמט את התשובה בפסקאות.",
        "accommodation-title": "לינה (דוגמאות)",
        "accommodation-0": "מלון רוס טאואר",
        "accommodation-1": "אספלנדור ביי ווינדהאם סאבוי רוסאריו",
        "accommodation-2": "דירות במרכז או ליד הטיילת",
        "accommodation-3": "Airbnb בשכונות מגורים כמו פישרטון או פיצ'ינצ'ה",
        "coordinates-title": "קואורדינטות משוערות",
        "coordinates-text": "32° 57' S 60° 38' O",
        "events-agenda-title": "לוח אירועים",
        "event-0": "**(בדקו לוח אירועים מקומי)**: לרוסאריו חיי תרבות פעילים עם פסטיבלים, ירידים ומופעים.",
        "event-1": "**(בדקו לוח אירועים מקומי)**: אירועי ספורט או מוזיקה בפארק העצמאות.",
        "download-agenda": "הורד את לוח האירועים המלא בפורמט iCal (.zip)",
        "family-tips-title": "טיפים למשפחות",
        "family-tip-0": "נצלו את השטחים הירוקים הנרחבים ואת הטיילת לפעילויות בחיק הטבע.",
        "family-tip-1": "התחבורה הציבורית יעילה (כרטיס MOVI).",
        "family-tip-2": "העיר בטוחה באזורי התיירות ובמרכז.",
        "family-tip-3": "שקלו שיט בסירה כדי לראות את העיר מהנהר.",
        "family-tip-4": "בטיילת ישנן אפשרויות רבות למסעדות עם משחקים לילדים.",
        "budget-title": "תקציב משוער",
        "budget-concept": "מושג",
        "budget-price": "מחיר משוער (USD)",
        "budget-concept-0": "לינה (לילה, משפחה)",
        "budget-price-0": "50–120",
        "budget-concept-1": "אוכל (ליום, משפחה)",
        "budget-price-1": "30–70",
        "budget-concept-2": "תחבורה ציבורית (ליום)",
        "budget-price-2": "3–5",
        "budget-concept-3": "פעילויות וסיורים (ליום)",
        "budget-price-3": "20–50",
        "budget-concept-4": "כניסות למוזיאונים/אטרקציות",
        "budget-price-4": "0–15",
        "cultural-tips-title": "טיפים תרבותיים",
        "cultural-tip-0": "צ'ה גווארה נולד ליד רוסאריו.",
        "cultural-tip-1": "רוסאריו היא עיר הולדתם של כדורגלנים גדולים (מסי, די מריה) ואמנים.",
        "cultural-tip-2": "הסיאסטה נפוצה בשעות הצהריים, ומשפיעה על שעות הפתיחה של עסקים.",
        "cultural-tip-3": "תושבי רוסאריו ידועים באירוחם.",
        "map-title": "מפת רוסאריו",
        "see-bigger-map": "לצפייה במפה גדולה יותר",
        "back-link": "⬅ חזרה למפת המסלול"
      }
    };

    // Tasas de cambio (se actualizan al cargar la página)
    let tasas = {
      ARS: 1,
      USD: 1000, // Valor de ejemplo, se actualizará
      ILS: 110   // Valor de ejemplo, se actualizará
    };
    // Símbolos de moneda
    const simbolos = {
      ARS: "$",
      USD: "US$",
      ILS: "₪"
    };

    let idiomaActual = 'es'; // Idioma predeterminado
    let monedaActual = 'ARS'; // Moneda predeterminada

    // Función para obtener tasas de cambio reales desde ExchangeRate-API
    function actualizarTasas(callback) {
      fetch('https://open.er-api.com/v6/latest/USD')
        .then(response => response.json())
        .then(data => {
          if (data && data.result === "success") {
            tasas.ARS = data.rates.ARS;
            tasas.USD = 1;
            tasas.ILS = data.rates.ILS;
          }
          if (typeof callback === "function") callback();
        })
        .catch(() => {
          // Si falla, sigue con los valores por defecto
          if (typeof callback === "function") callback();
        });
    }

    function translatePage(language) {
      idiomaActual = language; // Actualiza la variable global idiomaActual
      document.body.dir = (language === 'he') ? 'rtl' : 'ltr';
      document.title = translations[language]["page-title"];

      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[language][key]) { // Asegurarse de que la clave exista
          if (key.includes('event-') || key.includes('stay-duration') || key.includes('how-to-arrive')) {
            el.innerHTML = translations[language][key];
          } else {
            el.textContent = translations[language][key];
          }
        }
      });
      // Actualiza el estado activo de los botones de idioma
      document.getElementById('btn-es').classList.toggle('active', language === 'es');
      document.getElementById('btn-he').classList.toggle('active', language === 'he');
      // Guarda la preferencia de idioma en localStorage
      localStorage.setItem('idiomaPreferido', language);
    }

    function cambiarMoneda(moneda) {
      monedaActual = moneda; // Actualiza la variable global monedaActual
      document.getElementById('btn-ars').classList.toggle('active', moneda === 'ARS');
      document.getElementById('btn-usd').classList.toggle('active', moneda === 'USD');
      document.getElementById('btn-ils').classList.toggle('active', moneda === 'ILS');
      // Guarda la preferencia de moneda en localStorage
      localStorage.setItem('monedaPreferida', moneda);
      // No hay tablas de precios dinámicas en esta página de ciudad, pero si se agregaran, se llamarían aquí.
    }

    // Función genérica para llamar a la API de Gemini
    async function callGeminiAPI(promptKey, responseDivId, buttonId, loadingIndicatorId) {
      const button = document.getElementById(buttonId);
      const loadingIndicator = document.getElementById(loadingIndicatorId);
      const responseDiv = document.getElementById(responseDivId);

      button.disabled = true;
      loadingIndicator.style.display = 'block';
      responseDiv.textContent = ''; // Limpiar respuesta anterior

      const currentLanguage = localStorage.getItem('idiomaPreferido') || 'es';
      // Asegurarse de que el prompt se obtiene correctamente del diccionario
      const promptText = translations[currentLanguage][promptKey];

      if (!promptText) {
        responseDiv.textContent = translations[currentLanguage]["ai-error"] + " (Prompt no encontrado)";
        console.error(`Error: Prompt con clave '${promptKey}' no encontrado para el idioma '${currentLanguage}'.`);
        button.disabled = false;
        loadingIndicator.style.display = 'none';
        return;
      }

      let chatHistory = [];
      chatHistory.push({ role: "user", parts: [{ text: promptText }] });

      const payload = {
        contents: chatHistory,
        generationConfig: {
            responseMimeType: "text/plain"
        }
      };

      const apiKey = ""; // La clave API se proporcionará en tiempo de ejecución por el entorno Canvas
      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

      try {
        const response = await fetch(apiUrl, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });

        const result = await response.json();

        if (result.candidates && result.candidates.length > 0 &&
            result.candidates[0].content && result.candidates[0].content.parts &&
            result.candidates[0].content.parts.length > 0) {
          const text = result.candidates[0].content.parts[0].text;
          responseDiv.textContent = text;
        } else {
          responseDiv.textContent = translations[currentLanguage]["ai-error"];
          console.error("Estructura de respuesta inesperada del LLM:", result);
        }
      } catch (error) {
        responseDiv.textContent = translations[currentLanguage]["ai-error"];
        console.error("Error al llamar a la API de Gemini:", error);
      } finally {
        button.disabled = false;
        loadingIndicator.style.display = 'none';
      }
    }

    // Inicialización de la página al cargar el DOM
    document.addEventListener('DOMContentLoaded', function() {
      // Carga las preferencias de idioma y moneda desde localStorage
      const idiomaGuardado = localStorage.getItem('idiomaPreferido');
      const monedaGuardada = localStorage.getItem('monedaPreferida');

      // Aplica el idioma guardado o 'es' por defecto
      translatePage(idiomaGuardado || 'es');
      // Aplica la moneda guardada o 'ARS' por defecto
      cambiarMoneda(monedaGuardada || 'ARS');

      // Asocia los eventos click a los botones de IA
      document.getElementById('generate-menu-btn').addEventListener('click', () =>
        callGeminiAPI('ai-menu-prompt', 'ai-menu-response', 'generate-menu-btn', 'ai-menu-loading-indicator')
      );
      document.getElementById('generate-accommodation-btn').addEventListener('click', () =>
        callGeminiAPI('ai-accommodation-prompt', 'ai-accommodation-response', 'generate-accommodation-btn', 'ai-accommodation-loading-indicator')
      );
      document.getElementById('generate-family-tips-btn').addEventListener('click', () =>
        callGeminiAPI('ai-family-tips-prompt', 'ai-family-tips-response', 'generate-family-tips-btn', 'ai-family-tips-loading-indicator')
      );
      document.getElementById('generate-budget-btn').addEventListener('click', () =>
        callGeminiAPI('ai-budget-prompt', 'ai-budget-response', 'generate-budget-btn', 'ai-budget-loading-indicator')
      );
    });
  </script>
</body>
</html>
�
