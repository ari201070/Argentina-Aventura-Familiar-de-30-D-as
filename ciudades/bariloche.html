<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title data-i18n="page-title">Bariloche | Viaje Familiar a Argentina</title>
  <link rel="stylesheet" href="estilos.css">
  <style>
    /* Estilos generales del cuerpo y barra superior */
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      color: #333;
      margin: 20px;
      transition: direction 0.3s;
    }
    #language-selector {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
      background-color: rgba(255,255,255,0.8);
      padding: 5px;
      border-radius: 5px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      display: flex; /* Para alinear los botones de idioma y moneda */
      align-items: center;
      gap: 10px; /* Espacio entre elementos */
    }
    .language-btn, .currency-btn { /* Clase unificada para botones de control */
      font-weight: bold;
      padding: 8px 12px;
      margin: 0 2px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      background-color: #f0f0f0;
    }
    .language-btn.active, .currency-btn.active {
      background: #e6eaff;
      border-color: #6d7fc9;
      font-weight: bold;
    }
    .back-link {
      margin-left: 20px;
      text-decoration: none;
      font-weight: bold;
      color: #007BFF;
    }
    /* Estilos para la foto de la ciudad */
    .ciudad-foto {
      width: 100%;
      max-width: 700px;
      height: auto;
      display: block;
      margin: 30px auto 20px auto;
      border-radius: 14px;
      box-shadow: 0 3px 16px rgba(0,0,0,0.15);
    }
    .foto-caption {
      text-align: center;
      color: #555;
      font-size: 1em;
      margin-bottom: 30px;
    }
    h1, h2, h3 { /* Agregado h3 para subsecciones */
      color: #0F4761;
    }
    ul {
      margin-bottom: 20px;
      padding-left: 25px; /* Ajuste para listas */
    }
    ul li {
      margin-bottom: 5px;
    }
    iframe {
      border: 1px solid black;
      width: 100%; /* Asegura que el mapa sea responsive */
      max-width: 700px; /* Limita el ancho máximo del mapa */
      display: block;
      margin: 20px auto; /* Centra el mapa */
    }
    /* Estilos para tablas añadidas */
    table {
      border-collapse: collapse;
      width: 100%;
      max-width: 700px; /* Limita el ancho máximo de las tablas */
      margin: 20px auto;
      background: #f7fbff;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      border-radius: 8px;
      overflow: hidden;
    }
    th, td {
      border: 1px solid #b3c7e6;
      padding: 10px 15px;
      text-align: left;
      font-size: 16px;
    }
    th {
      background: #e6f0fa;
      font-weight: bold;
    }
    .rtl {
      direction: rtl !important;
      text-align: right !important;
    }
    .rtl ul {
      padding-right: 25px;
      padding-left: 0;
    }

    /* Estilos para las secciones de IA */
    .ai-section {
      background: #e6f0fa;
      padding: 20px;
      border-radius: 8px;
      margin: 30px auto;
      max-width: 700px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .ai-section h2 {
      color: #2176d2;
      margin-top: 0;
    }
    .ai-button {
      background-color: #4CAF50; /* Green */
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s ease;
      display: block;
      margin: 15px auto;
      max-width: 300px;
    }
    .ai-button:hover {
      background-color: #45a049;
    }
    .ai-button:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
    }
    .ai-response {
      margin-top: 20px;
      padding: 15px;
      background-color: #ffffff;
      border: 1px solid #d0e0f0;
      border-radius: 5px;
      white-space: pre-wrap;
      font-size: 15px;
      line-height: 1.6;
      min-height: 50px;
    }
    .ai-loading {
      text-align: center;
      font-style: italic;
      color: #666;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div id="language-selector">
    <span data-i18n="idioma">Idioma:</span>
    <button onclick="translatePage('es')" class="language-btn" id="btn-es">Español</button>
    <button onclick="translatePage('he')" class="language-btn" id="btn-he">עברית</button>
    <span data-i18n="moneda">Moneda:</span>
    <button id="btn-ars" onclick="cambiarMoneda('ARS')" class="currency-btn">ARS</button>
    <button id="btn-usd" onclick="cambiarMoneda('USD')" class="currency-btn">USD</button>
    <button id="btn-ils" onclick="cambiarMoneda('ILS')" class="currency-btn">ILS</button>
    <a href="../index.html" class="back-link" id="back-link" data-i18n="back-link">⬅ Volver al itinerario</a>
  </div>

  <img src="../docs/imagenes/bariloche/bariloche.jpg"
       alt="Paisaje de Bariloche"
       class="ciudad-foto" id="city-photo" onerror="this.src='https://placehold.co/700x400/cccccc/333333?text=Imagen+Bariloche'">
  <div class="foto-caption" id="foto-caption" data-i18n="foto-caption">Paisaje de Bariloche</div>

  <h1 id="city-title" data-i18n="city-title">Bariloche</h1>
  <p id="welcome-text" data-i18n="welcome-text">San Carlos de Bariloche, la capital de los Lagos, es un destino de montaña en la Patagonia argentina, famoso por sus paisajes de bosques, lagos, montañas nevadas y, por supuesto, el chocolate. Ideal para aventuras familiares en cualquier estación.</p>

  <h2 data-i18n="dates-duration-title">Fechas y duración</h2>
  <ul>
    <li data-i18n="stay-duration">**Estadía**: 05/10 al 09/10 (5 días)</li>
    <li data-i18n="how-to-arrive">**Cómo llegar**: Vuelo desde Rosario / Bus de larga distancia</li>
  </ul>

  <h2 id="main-attractions-title" data-i18n="main-attractions-title">Lugares imperdibles</h2>
  <ul id="main-attractions-list">
    <li><a href="https://es.wikipedia.org/wiki/Centro_C%C3%ADvico_de_Bariloche" target="_blank" id="attraction-0" data-i18n="attraction-0">Centro Cívico</a></li>
    <li><a href="https://es.wikipedia.org/wiki/Lago_Nahuel_Huapi" target="_blank" id="attraction-1" data-i18n="attraction-1">Lago Nahuel Huapi</a></li>
    <li><a href="https://bariloche.org/es/circuito-chico" target="_blank" id="attraction-2" data-i18n="attraction-2">Circuito Chico</a></li>
    <li><a href="https://www.catedralaltapatagonia.com/" target="_blank" id="attraction-3" data-i18n="attraction-3">Cerro Catedral</a></li>
    <li><a href="https://cerrocampanario.com.ar/" target="_blank" id="attraction-4" data-i18n="attraction-4">Cerro Campanario</a></li>
    <li><a href="https://www.parquesnacionales.gob.ar/areas-protegidas/region-patagonia/nahuel-huapi/bosque-de-arrayanes/" target="_blank" id="attraction-5" data-i18n="attraction-5">Bosque de Arrayanes</a></li>
    <li><a href="https://www.bariloche.org/es/puerto-blest" target="_blank" id="attraction-6" data-i18n="attraction-6">Puerto Blest y Cascada de los Cántaros</a></li>
  </ul>

  <h2 data-i18n="recommended-activities-title">Actividades recomendadas</h2>
  <ul>
    <li data-i18n="rec-activity-0">Degustación de chocolates y cervezas artesanales.</li>
    <li data-i18n="rec-activity-1">Navegación por el Lago Nahuel Huapi.</li>
    <li data-i18n="rec-activity-2">Trekking y senderismo (adaptados para familias).</li>
    <li data-i18n="rec-activity-3">Deportes de nieve en invierno (esquí, snowboard, culipatin).</li>
    <li data-i18n="rec-activity-4">Cabalgatas o canopy en los alrededores.</li>
    <li data-i18n="rec-activity-5">Visita a la Colonia Suiza para probar el curanto.</li>
    <li data-i18n="rec-activity-6">Recorrer el Circuito Chico en auto o bicicleta.</li>
  </ul>

  <h2 data-i18n="gastronomy-title">Gastronomía destacada</h2>
  <p data-i18n="gastronomy-intro">La gastronomía de Bariloche es famosa por sus chocolates, carnes de caza (ciervo, jabalí), truchas y ahumados. También hay opciones saludables y para dietas especiales.</p>
  <h3 data-i18n="restaurants-title">Restaurantes recomendados</h3>
  <table>
    <thead>
      <tr>
        <th data-i18n="table-restaurant">Restaurante</th>
        <th data-i18n="table-type">Tipo</th>
        <th data-i18n="table-gluten-free">Sin Gluten</th>
        <th data-i18n="table-sugar-free">Sin Azúcar</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a href="https://www.elbolichedealberto.com.ar/" target="_blank">El Boliche de Alberto</a></td>
        <td data-i18n="restaurant-type-0">Parrilla / Carnes</td>
        <td data-i18n="yes-symbol">✔️</td>
        <td data-i18n="no-symbol">❌</td>
      </tr>
      <tr>
        <td><a href="https://www.tripadvisor.com.ar/Restaurant_Review-g312848-d10103700-Reviews-La_Fonda_del_Tio-San_Carlos_de_Bariloche_Province_of_Rio_Negro_Patagonia.html" target="_blank">La Fonda del Tío</a></td>
        <td data-i18n="restaurant-type-1">Comida patagónica casera</td>
        <td data-i18n="yes-symbol">✔️</td>
        <td data-i18n="yes-symbol">✔️</td>
      </tr>
      <tr>
        <td><a href="https://www.butterfly.com.ar/" target="_blank">Butterfly</a></td>
        <td data-i18n="restaurant-type-2">Alta cocina / Trucha</td>
        <td data-i18n="yes-symbol">✔️</td>
        <td data-i18n="yes-symbol">✔️</td>
      </tr>
      <tr>
        <td><a href="https://www.rapanui.com.ar/" target="_blank">Rapa Nui</a></td>
        <td data-i18n="restaurant-type-3">Chocolatería / Cafetería</td>
        <td data-i18n="yes-symbol">✔️</td>
        <td data-i18n="yes-symbol">✔️</td>
      </tr>
    </tbody>
  </table>
  <h3 data-i18n="cafes-title">Confiterías y cafés</h3>
  <table>
    <thead>
      <tr>
        <th data-i18n="table-cafe">Confitería</th>
        <th data-i18n="table-type">Tipo</th>
        <th data-i18n="table-gluten-free">Sin Gluten</th>
        <th data-i18n="table-sugar-free">Sin Azúcar</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a href="https://www.mamuschka.com/" target="_blank">Mamuschka</a></td>
        <td data-i18n="cafe-type-0">Chocolatería / Pastelería</td>
        <td data-i18n="yes-symbol">✔️</td>
        <td data-i18n="yes-symbol">✔️</td>
      </tr>
      <tr>
        <td><a href="https://www.abuelagoye.com/" target="_blank">Abuela Goye</a></td>
        <td data-i18n="cafe-type-1">Chocolatería / Cafetería</td>
        <td data-i18n="yes-symbol">✔️</td>
        <td data-i18n="yes-symbol">✔️</td>
      </tr>
      <tr>
        <td><a href="https://www.tripadvisor.com.ar/Restaurant_Review-g312848-d10103700-Reviews-El_Almacen_de_Flores-San_Carlos_de_Bariloche_Province_of_Rio_Negro_Patagonia.html" target="_blank">El Almacén de Flores</a></td>
        <td data-i18n="cafe-type-2">Café de especialidad</td>
        <td data-i18n="yes-symbol">✔️</td>
        <td data-i18n="yes-symbol">✔️</td>
      </tr>
    </tbody>
  </table>

  <div class="ai-section">
    <h2 data-i18n="ai-menu-title">Generador de Menú Saludable ✨</h2>
    <p data-i18n="ai-menu-description">Obtén sugerencias de menú para un día completo (desayuno, almuerzo, cena) adaptadas para dietas bajas en carbohidratos, aptas para diabéticos y, si es posible, sin gluten, inspiradas en la gastronomía de Bariloche.</p>
    <button class="ai-button" id="generate-menu-btn" data-i18n="generate-menu-button">Generar Menú</button>
    <div class="ai-loading" id="ai-menu-loading-indicator" style="display:none;" data-i18n="ai-loading">Generando menú...</div>
    <div class="ai-response" id="ai-menu-response"></div>
  </div>

  <div class="ai-section">
    <h2 data-i18n="ai-accommodation-title">Sugerencias de Alojamiento con IA 🏨</h2>
    <p data-i18n="ai-accommodation-description">Obtén recomendaciones de alojamiento en Bariloche, considerando opciones familiares, seguras y bien ubicadas.</p>
    <button class="ai-button" id="generate-accommodation-btn" data-i18n="generate-accommodation-button">Generar Sugerencias</button>
    <div class="ai-loading" id="ai-accommodation-loading-indicator" style="display:none;" data-i18n="ai-loading">Generando sugerencias...</div>
    <div class="ai-response" id="ai-accommodation-response"></div>
  </div>

  <div class="ai-section">
    <h2 data-i18n="ai-family-tips-title">Consejos Adicionales para Familias con IA 👨‍👩‍👧‍👦</h2>
    <p data-i18n="ai-family-tips-description">Recibe consejos personalizados para disfrutar Bariloche en familia, incluyendo actividades, seguridad y logística.</p>
    <button class="ai-button" id="generate-family-tips-btn" data-i18n="generate-family-tips-button">Generar Consejos</button>
    <div class="ai-loading" id="ai-family-tips-loading-indicator" style="display:none;" data-i18n="ai-loading">Generando consejos...</div>
    <div class="ai-response" id="ai-family-tips-response"></div>
  </div>

  <div class="ai-section">
    <h2 data-i18n="ai-budget-title">Análisis de Presupuesto con IA 💰</h2>
    <p data-i18n="ai-budget-description">Obtén un análisis y desglose del presupuesto orientativo para tu estadía en Bariloche, con posibles optimizaciones.</p>
    <button class="ai-button" id="generate-budget-btn" data-i18n="generate-budget-button">Analizar Presupuesto</button>
    <div class="ai-loading" id="ai-budget-loading-indicator" style="display:none;" data-i18n="ai-loading">Analizando presupuesto...</div>
    <div class="ai-response" id="ai-budget-response"></div>
  </div>

  <h2 data-i18n="accommodation-title">Alojamiento (ejemplos)</h2>
  <ul>
    <li data-i18n="accommodation-0">Hotel Llao Llao (lujo)</li>
    <li data-i18n="accommodation-1">Hotel Panamericano Bariloche</li>
    <li data-i18n="accommodation-2">Cabañas y complejos turísticos con actividades para niños</li>
    <li data-i18n="accommodation-3">Airbnb en el centro o cerca del Circuito Chico</li>
  </ul>

  <h2 data-i18n="coordinates-title">Coordenadas aproximadas</h2>
  <p data-i18n="coordinates-text">41° 08' S 71° 18' O</p>

  <h2 data-i18n="events-agenda-title">Agenda de eventos</h2>
  <ul>
    <li data-i18n="event-0">**(Consultar agenda local)**: Eventos de invierno (Fiesta Nacional de la Nieve).</li>
    <li data-i18n="event-1">**(Consultar agenda local)**: Festivales de música o gastronomía en otras estaciones.</li>
    <li><a href="../docs/agenda/ariflier1970@gmail.com.ical.zip" target="_blank" data-i18n="download-agenda">Descargar agenda completa en formato iCal (.zip)</a></li>
  </ul>

  <h2 data-i18n="family-tips-title">Consejos para familias</h2>
  <ul>
    <li data-i18n="family-tip-0">Vístanse en capas (la temperatura puede variar mucho).</li>
    <li data-i18n="family-tip-1">Reserven excursiones y alojamiento con anticipación, especialmente en temporada alta.</li>
    <li data-i18n="family-tip-2">Hay muchas actividades para niños: parques de nieve, senderos fáciles, paseos en barco.</li>
    <li data-i18n="family-tip-3">La zona es muy segura para explorar en familia.</li>
    <li data-i18n="family-tip-4">Prueben los chocolates locales, pero con moderación si hay restricciones.</li>
  </ul>

  <h2 data-i18n="budget-title">Presupuesto orientativo</h2>
  <table>
    <thead>
      <tr>
        <th data-i18n="budget-concept">Concepto</th>
        <th data-i18n="budget-price">Precio estimado (USD)</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td data-i18n="budget-concept-0">Alojamiento (noche, familia)</td>
        <td data-i18n="budget-price-0">70–180</td>
      </tr>
      <tr>
        <td data-i18n="budget-concept-1">Comida (por día, familia)</td>
        <td data-i18n="budget-price-1">40–90</td>
      </tr>
      <tr>
        <td data-i18n="budget-concept-2">Transporte local (por día)</td>
        <td data-i18n="budget-price-2">5–15</td>
      </tr>
      <tr>
        <td data-i18n="budget-concept-3">Actividades y tours (por día)</td>
        <td data-i18n="budget-price-3">30–80</td>
      </tr>
      <tr>
        <td data-i18n="budget-concept-4">Entradas museos/atracciones</td>
        <td data-i18n="budget-price-4">0–20</td>
      </tr>
    </tbody>
  </table>

  <h2 data-i18n="cultural-tips-title">Tips culturales</h2>
  <ul>
    <li data-i18n="cultural-tip-0">Bariloche tiene una fuerte influencia de inmigrantes suizos y alemanes, visible en su arquitectura y gastronomía.</li>
    <li data-i18n="cultural-tip-1">Es un destino popular para viajes de egresados, por lo que puede haber muchos jóvenes en ciertas épocas.</li>
    <li data-i18n="cultural-tip-2">La cultura de montaña es muy arraigada: respeto por la naturaleza, deportes al aire libre.</li>
  </ul>

  <h2 id="map-title" data-i18n="map-title">Mapa de Bariloche</h2>
  <iframe src="https://www.openstreetmap.org/export/embed.html?bbox=-71.5%2C-41.25%2C-71.1%2C-41.0&amp;layer=mapnik" width="100%" height="350"></iframe>
  <br><small><a href="https://www.openstreetmap.org/#map=12/-41.133/-71.328" target="_blank" id="see-bigger-map" data-i18n="see-bigger-map">Ver mapa más grande</a></small>

  <script>
    // Diccionario de traducciones español ↔ hebreo
    const translations = {
      es: {
        "page-title": "Bariloche | Viaje Familiar a Argentina",
        "idioma": "Idioma:",
        "moneda": "Moneda:",
        "city-title": "Bariloche",
        "welcome-text": "San Carlos de Bariloche, la capital de los Lagos, es un destino de montaña en la Patagonia argentina, famoso por sus paisajes de bosques, lagos, montañas nevadas y, por supuesto, el chocolate. Ideal para aventuras familiares en cualquier estación.",
        "foto-caption": "Paisaje de Bariloche",
        "dates-duration-title": "Fechas y duración",
        "stay-duration": "**Estadía**: 05/10 al 09/10 (5 días)",
        "how-to-arrive": "**Cómo llegar**: Vuelo desde Rosario / Bus de larga distancia",
        "main-attractions-title": "Lugares imperdibles",
        "attraction-0": "Centro Cívico",
        "attraction-1": "Lago Nahuel Huapi",
        "attraction-2": "Circuito Chico",
        "attraction-3": "Cerro Catedral",
        "attraction-4": "Cerro Campanario",
        "attraction-5": "Bosque de Arrayanes",
        "attraction-6": "Puerto Blest y Cascada de los Cántaros",
        "recommended-activities-title": "Actividades recomendadas",
        "rec-activity-0": "Degustación de chocolates y cervezas artesanales.",
        "rec-activity-1": "Navegación por el Lago Nahuel Huapi.",
        "rec-activity-2": "Trekking y senderismo (adaptados para familias).",
        "rec-activity-3": "Deportes de nieve en invierno (esquí, snowboard, culipatin).",
        "rec-activity-4": "Cabalgatas o canopy en los alrededores.",
        "rec-activity-5": "Visita a la Colonia Suiza para probar el curanto.",
        "rec-activity-6": "Recorrer el Circuito Chico en auto o bicicleta.",
        "gastronomy-title": "Gastronomía destacada",
        "gastronomy-intro": "La gastronomía de Bariloche es famosa por sus chocolates, carnes de caza (ciervo, jabalí), truchas y ahumados. También hay opciones saludables y para dietas especiales.",
        "restaurants-title": "Restaurantes recomendados",
        "table-restaurant": "Restaurante",
        "table-type": "Tipo",
        "table-gluten-free": "Sin Gluten",
        "table-sugar-free": "Sin Azúcar",
        "restaurant-type-0": "Parrilla / Carnes",
        "restaurant-type-1": "Comida patagónica casera",
        "restaurant-type-2": "Alta cocina / Trucha",
        "restaurant-type-3": "Chocolatería / Cafetería",
        "cafes-title": "Confiterías y cafés",
        "table-cafe": "Confitería",
        "cafe-type-0": "Chocolatería / Pastelería",
        "cafe-type-1": "Chocolatería / Cafetería",
        "cafe-type-2": "Café de especialidad",
        "yes-symbol": "✔️",
        "no-symbol": "❌",
        "ai-menu-title": "Generador de Menú Saludable ✨",
        "ai-menu-description": "Obtén sugerencias de menú para un día completo (desayuno, almuerzo, cena) adaptadas para dietas bajas en carbohidratos, aptas para diabéticos y, si es posible, sin gluten, inspiradas en la gastronomía de Bariloche.",
        "generate-menu-button": "Generar Menú",
        "ai-loading": "Generando menú...",
        "ai-error": "Error al generar el menú. Por favor, inténtalo de nuevo más tarde.",
        "ai-menu-prompt": "Genera un plan de menú de un día (desayuno, almuerzo, cena) para una familia que visita Bariloche, Argentina. Las opciones deben ser aptas para diabéticos, bajas en carbohidratos y, si es posible, sin gluten. Incluye ejemplos de platos típicos patagónicos adaptados a estas restricciones dietéticas. Formatea la respuesta en párrafos claros para cada comida.",
        "ai-accommodation-title": "Sugerencias de Alojamiento con IA 🏨",
        "ai-accommodation-description": "Obtén recomendaciones de alojamiento en Bariloche, considerando opciones familiares, seguras y bien ubicadas.",
        "generate-accommodation-button": "Generar Sugerencias",
        "ai-accommodation-prompt": "Genera 3-5 sugerencias de alojamiento en Bariloche, Argentina, ideales para una familia con 2 hijos. Considera opciones seguras, bien ubicadas y con servicios adecuados para familias (ej. piscina, cocina, áreas de juego). Incluye diferentes tipos de alojamiento como hoteles, cabañas o Airbnb. Formatea la respuesta con viñetas.",
        "ai-family-tips-title": "Consejos Adicionales para Familias con IA 👨‍👩‍👧‍👦",
        "ai-family-tips-description": "Recibe consejos personalizados para disfrutar Bariloche en familia, incluyendo actividades, seguridad y logística.",
        "generate-family-tips-button": "Generar Consejos",
        "ai-family-tips-prompt": "Proporciona 5 consejos prácticos y personalizados para una familia con niños que visita Bariloche, Argentina. Los consejos deben cubrir aspectos como actividades para niños, seguridad en la ciudad, opciones de transporte familiar, y cómo aprovechar al máximo la estadía. Formatea la respuesta con viñetas.",
        "ai-budget-title": "Análisis de Presupuesto con IA 💰",
        "ai-budget-description": "Obtén un análisis y desglose del presupuesto orientativo para tu estadía en Bariloche, con posibles optimizaciones.",
        "generate-budget-button": "Analizar Presupuesto",
        "ai-budget-prompt": "Analiza el siguiente presupuesto orientativo para una familia en Bariloche (USD): Alojamiento (noche): 70-180, Comida (día): 40-90, Transporte local (día): 5-15, Actividades (día): 30-80, Entradas: 0-20. Proporciona un desglose estimado por día y por categoría, y sugiere 2-3 formas de optimizar o ahorrar en este presupuesto sin sacrificar la experiencia familiar. Formatea la respuesta en párrafos.",
        "accommodation-title": "Alojamiento (ejemplos)",
        "accommodation-0": "Hotel Llao Llao (lujo)",
        "accommodation-1": "Hotel Panamericano Bariloche",
        "accommodation-2": "Cabañas y complejos turísticos con actividades para niños",
        "accommodation-3": "Airbnb en el centro o cerca del Circuito Chico",
        "coordinates-title": "Coordenadas aproximadas",
        "coordinates-text": "41° 08' S 71° 18' O",
        "events-agenda-title": "Agenda de eventos",
        "event-0": "**(Consultar agenda local)**: Eventos de invierno (Fiesta Nacional de la Nieve).",
        "event-1": "**(Consultar agenda local)**: Festivales de música o gastronomía en otras estaciones.",
        "download-agenda": "Descargar agenda completa en formato iCal (.zip)",
        "family-tips-title": "Consejos para familias",
        "family-tip-0": "Vístanse en capas (la temperatura puede variar mucho).",
        "family-tip-1": "Reserven excursiones y alojamiento con anticipación, especialmente en temporada alta.",
        "family-tip-2": "Hay muchas actividades para niños: parques de nieve, senderos fáciles, paseos en barco.",
        "family-tip-3": "La zona es muy segura para explorar en familia.",
        "family-tip-4": "Prueben los chocolates locales, pero con moderación si hay restricciones.",
        "budget-title": "Presupuesto orientativo",
        "budget-concept": "Concepto",
        "budget-price": "Precio estimado (USD)",
        "budget-concept-0": "Alojamiento (noche, familia)",
        "budget-price-0": "70–180",
        "budget-concept-1": "Comida (por día, familia)",
        "budget-price-1": "40–90",
        "budget-concept-2": "Transporte local (por día)",
        "budget-price-2": "5–15",
        "budget-concept-3": "Actividades y tours (por día)",
        "budget-price-3": "30–80",
        "budget-concept-4": "Entradas museos/atracciones",
        "budget-price-4": "0–20",
        "cultural-tips-title": "Tips culturales",
        "cultural-tip-0": "Bariloche tiene una fuerte influencia de inmigrantes suizos y alemanes, visible en su arquitectura y gastronomía.",
        "cultural-tip-1": "Es un destino popular para viajes de egresados, por lo que puede haber muchos jóvenes en ciertas épocas.",
        "cultural-tip-2": "La cultura de montaña es muy arraigada: respeto por la naturaleza, deportes al aire libre.",
        "map-title": "Mapa de Bariloche",
        "see-bigger-map": "Ver mapa más grande",
        "back-link": "⬅ Volver al itinerario"
      },
      he: {
        "page-title": "ברילוצ'ה | טיול משפחתי בארגנטינה",
        "idioma": "שפה:",
        "moneda": "מטבע:",
        "city-title": "ברילוצ'ה",
        "welcome-text": "סן קרלוס דה ברילוצ'ה, בירת האגמים, היא יעד הררי בפטגוניה הארגנטינאית, מפורסמת בנופיה של יערות, אגמים, הרים מושלגים וכמובן, שוקולד. אידיאלית להרפתקאות משפחתיות בכל עונה.",
        "foto-caption": "נוף של ברילוצ'ה",
        "dates-duration-title": "תאריכים ומשך שהייה",
        "stay-duration": "**שהייה**: 05/10 עד 09/10 (5 ימים)",
        "how-to-arrive": "**איך מגיעים**: טיסה מרוסאריו / אוטובוס למרחקים ארוכים",
        "main-attractions-title": "מקומות שאסור לפספס",
        "attraction-0": "המרכז האזרחי",
        "attraction-1": "אגם נאוול ואפי",
        "attraction-2": "המסלול הקצר (Circuito Chico)",
        "attraction-3": "סרו קתדרל",
        "attraction-4": "סרו קמפנריו",
        "attraction-5": "יער האראיינס",
        "attraction-6": "פוארטו בלסט ומפל הקנקנים",
        "recommended-activities-title": "פעילויות מומלצות",
        "rec-activity-0": "טעימת שוקולדים ובירות בוטיק.",
        "rec-activity-1": "שיט באגם נאוול ואפי.",
        "rec-activity-2": "טרקים וטיולים רגליים (מותאמים למשפחות).",
        "rec-activity-3": "ספורט חורף (סקי, סנובורד, מזחלות).",
        "rec-activity-4": "רכיבה על סוסים או אומגות בסביבה.",
        "rec-activity-5": "ביקור בקולוניה השוויצרית לטעום את הקוראנטו.",
        "rec-activity-6": "לנסוע במסלול הקצר ברכב או באופניים.",
        "gastronomy-title": "גסטרונומיה מומלצת",
        "gastronomy-intro": "הגסטרונומיה של ברילוצ'ה מפורסמת בשוקולדים שלה, בשר ציד (צבי, חזיר בר), פורלים ומעושנים. יש גם אפשרויות בריאותיות ולדיאטות מיוחדות.",
        "restaurants-title": "מסעדות מומלצות",
        "table-restaurant": "מסעדה",
        "table-type": "סוג",
        "table-gluten-free": "ללא גלוטן",
        "table-sugar-free": "ללא סוכר",
        "restaurant-type-0": "מסעדת בשרים / בשרים",
        "restaurant-type-1": "אוכל פטגוני ביתי",
        "restaurant-type-2": "מטבח עילי / פורל",
        "restaurant-type-3": "שוקולטריה / בית קפה",
        "cafes-title": "קונדיטוריות ובתי קפה",
        "table-cafe": "קונדיטוריה",
        "cafe-type-0": "שוקולטריה / מאפים",
        "cafe-type-1": "שוקולטריה / בית קפה",
        "cafe-type-2": "קפה מיוחד",
        "yes-symbol": "✔️",
        "no-symbol": "❌",
        "ai-menu-title": "מחולל תפריט בריא ✨",
        "ai-menu-description": "קבלו הצעות לתפריט יומי (ארוחת בוקר, צהריים, ערב) המותאמות לדיאטות דלות פחמימות, מתאימות לסוכרתיים, ואם אפשר, ללא גלוטן, בהשראת הגסטרונומיה של ברילוצ'ה.",
        "generate-menu-button": "צור תפריט",
        "ai-loading": "מייצר תפריט...",
        "ai-error": "שגיאה ביצירת התפריט. אנא נסו שוב מאוחר יותר.",
        "ai-menu-prompt": "צור תוכנית תפריט יומית (ארוחת בוקר, צהריים, ערב) למשפחה המבקרת בברילוצ'ה, ארגנטינה. האפשרויות צריכות להיות מתאימות לסוכרתיים, דלות פחמימות, ואם אפשר, ללא גלוטן. כלול דוגמאות למנות פטגוניות טיפוסיות המותאמות למגבלות תזונתיות אלו. פרמט את התשובה בפסקאות ברורות לכל ארוחה.",
        "ai-accommodation-title": "הצעות לינה עם AI 🏨",
        "ai-accommodation-description": "קבלו המלצות לינה בברילוצ'ה, תוך התחשבות באפשרויות ידידותיות למשפחות, בטוחות וממוקמות היטב.",
        "generate-accommodation-button": "צור הצעות",
        "ai-accommodation-prompt": "צור 3-5 הצעות לינה בברילוצ'ה, ארגנטינה, אידיאליות למשפחה עם 2 ילדים. קח בחשבון אפשרויות בטוחות, ממוקמות היטב ועם שירותים מתאימים למשפחות (למשל, בריכה, מטבח, אזורי משחק). כלול סוגי לינה שונים כמו בתי מלון, בקתות או Airbnb. פרמט את התשובה עם נקודות.",
        "ai-family-tips-title": "טיפים נוספים למשפחות עם AI 👨‍👩‍👧‍👦",
        "ai-family-tips-description": "קבלו טיפים מותאמים אישית לבילוי בברילוצ'ה עם המשפחה, כולל פעילויות, בטיחות ולוגיסטיקה.",
        "generate-family-tips-button": "צור טיפים",
        "ai-family-tips-prompt": "ספק 5 טיפים מעשיים ומותאמים אישית למשפחה עם ילדים המבקרת בברילוצ'ה, ארגנטינה. הטיפים צריכים לכסות היבטים כמו פעילויות לילדים, בטיחות בעיר, אפשרויות תחבורה משפחתיות וכיצד להפיק את המרב מהשהייה. פרמט את התשובה עם נקודות.",
        "ai-budget-title": "ניתוח תקציב עם AI 💰",
        "ai-budget-description": "קבלו ניתוח ופירוט של התקציב המשוער לשהותכם בברילוצ'ה, עם אופטימיזציות אפשריות.",
        "generate-budget-button": "נתח תקציב",
        "ai-budget-prompt": "נתח את התקציב המשוער הבא למשפחה בברילוצ'ה (USD): לינה (לילה): 70-180, אוכל (יום): 40-90, תחבורה מקומית (יום): 5-15, פעילויות (יום): 30-80, כניסות: 0-20. ספק פירוט משוער ליום ולפי קטגוריה, והצע 2-3 דרכים לייעל או לחסוך בתקציב זה מבלי לוותר על החוויה המשפחתית. פרמט את התשובה בפסקאות.",
        "accommodation-title": "לינה (דוגמאות)",
        "accommodation-0": "מלון יאו יאו (יוקרה)",
        "accommodation-1": "מלון פאנאמריקן ברילוצ'ה",
        "accommodation-2": "בקתות ומתחמי נופש עם פעילויות לילדים",
        "accommodation-3": "Airbnb במרכז או ליד המסלול הקצר",
        "coordinates-title": "קואורדינטות משוערות",
        "coordinates-text": "41° 08' S 71° 18' O",
        "events-agenda-title": "לוח אירועים",
        "event-0": "**(בדקו לוח אירועים מקומי)**: אירועי חורף (פסטיבל השלג הלאומי).",
        "event-1": "**(בדקו לוח אירועים מקומי)**: פסטיבלי מוזיקה או גסטרונומיה בעונות אחרות.",
        "download-agenda": "הורד את לוח האירועים המלא בפורמט iCal (.zip)",
        "family-tips-title": "טיפים למשפחות",
        "family-tip-0": "התלבשו בשכבות (הטמפרטורה יכולה להשתנות מאוד).",
        "family-tip-1": "הזמינו טיולים ולינה מראש, במיוחד בעונת השיא.",
        "family-tip-2": "יש הרבה פעילויות לילדים: פארקי שלג, שבילים קלים, שיט בסירה.",
        "family-tip-3": "האזור בטוח מאוד לחקירה משפחתית.",
        "family-tip-4": "טעמו את השוקולדים המקומיים, אך במתינות אם יש הגבלות.",
        "budget-title": "תקציב משוער",
        "budget-concept": "מושג",
        "budget-price": "מחיר משוער (USD)",
        "budget-concept-0": "לינה (לילה, משפחה)",
        "budget-price-0": "70–180",
        "budget-concept-1": "אוכל (ליום, משפחה)",
        "budget-price-1": "40–90",
        "budget-concept-2": "תחבורה מקומית (ליום)",
        "budget-price-2": "5–15",
        "budget-concept-3": "פעילויות וסיורים (ליום)",
        "budget-price-3": "30–80",
        "budget-concept-4": "כניסות למוזיאונים/אטרקציות",
        "budget-price-4": "0–20",
        "cultural-tips-title": "טיפים תרבותיים",
        "cultural-tip-0": "לברוצ'ה השפעה חזקה של מהגרים שוויצרים וגרמנים, הנראית בארכיטקטורה ובגסטרונומיה שלה.",
        "cultural-tip-1": "זהו יעד פופולרי לטיולי סיום לימודים, ולכן ייתכנו צעירים רבים בתקופות מסוימות.",
        "cultural-tip-2": "תרבות ההרים מושרשת עמוק: כבוד לטבע, ספורט בחיק הטבע.",
        "map-title": "מפת ברילוצ'ה",
        "see-bigger-map": "לצפייה במפה גדולה יותר",
        "back-link": "⬅ חזרה למפת המסלול"
      }
    };

    // Tasas de cambio (se actualizan al cargar la página)
    let tasas = {
      ARS: 1,
      USD: 1000, // Valor de ejemplo, se actualizará
      ILS: 110   // Valor de ejemplo, se actualizará
    };
    // Símbolos de moneda
    const simbolos = {
      ARS: "$",
      USD: "US$",
      ILS: "₪"
    };

    let idiomaActual = 'es'; // Idioma predeterminado
    let monedaActual = 'ARS'; // Moneda predeterminada

    // Función para obtener tasas de cambio reales desde ExchangeRate-API
    function actualizarTasas(callback) {
      fetch('https://open.er-api.com/v6/latest/USD')
        .then(response => response.json())
        .then(data => {
          if (data && data.result === "success") {
            tasas.ARS = data.rates.ARS;
            tasas.USD = 1;
            tasas.ILS = data.rates.ILS;
          }
          if (typeof callback === "function") callback();
        })
        .catch(() => {
          // Si falla, sigue con los valores por defecto
          if (typeof callback === "function") callback();
        });
    }

    function translatePage(language) {
      idiomaActual = language; // Actualiza la variable global idiomaActual
      document.body.dir = (language === 'he') ? 'rtl' : 'ltr';
      document.title = translations[language]["page-title"];

      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[language][key]) { // Asegurarse de que la clave exista
          if (key.includes('event-') || key.includes('stay-duration') || key.includes('how-to-arrive')) {
            el.innerHTML = translations[language][key];
          } else {
            el.textContent = translations[language][key];
          }
        }
      });
      // Actualiza el estado activo de los botones de idioma
      document.getElementById('btn-es').classList.toggle('active', language === 'es');
      document.getElementById('btn-he').classList.toggle('active', language === 'he');
      // Guarda la preferencia de idioma en localStorage
      localStorage.setItem('idiomaPreferido', language);
    }

    function cambiarMoneda(moneda) {
      monedaActual = moneda; // Actualiza la variable global monedaActual
      document.getElementById('btn-ars').classList.toggle('active', moneda === 'ARS');
      document.getElementById('btn-usd').classList.toggle('active', moneda === 'USD');
      document.getElementById('btn-ils').classList.toggle('active', moneda === 'ILS');
      // Guarda la preferencia de moneda en localStorage
      localStorage.setItem('monedaPreferida', moneda);
      // No hay tablas de precios dinámicas en esta página de ciudad, pero si se agregaran, se llamarían aquí.
    }

    // Función genérica para llamar a la API de Gemini
    async function callGeminiAPI(promptKey, responseDivId, buttonId, loadingIndicatorId) {
      const button = document.getElementById(buttonId);
      const loadingIndicator = document.getElementById(loadingIndicatorId);
      const responseDiv = document.getElementById(responseDivId);

      button.disabled = true;
      loadingIndicator.style.display = 'block';
      responseDiv.textContent = ''; // Limpiar respuesta anterior

      const currentLanguage = localStorage.getItem('idiomaPreferido') || 'es';
      // Asegurarse de que el prompt se obtiene correctamente del diccionario
      const promptText = translations[currentLanguage][promptKey];

      if (!promptText) {
        responseDiv.textContent = translations[currentLanguage]["ai-error"] + " (Prompt no encontrado)";
        console.error(`Error: Prompt con clave '${promptKey}' no encontrado para el idioma '${currentLanguage}'.`);
        button.disabled = false;
        loadingIndicator.style.display = 'none';
        return;
      }

      let chatHistory = [];
      chatHistory.push({ role: "user", parts: [{ text: promptText }] });

      const payload = {
        contents: chatHistory,
        generationConfig: {
            responseMimeType: "text/plain"
        }
      };

      const apiKey = ""; // La clave API se proporcionará en tiempo de ejecución por el entorno Canvas
      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

      try {
        const response = await fetch(apiUrl, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });

        const result = await response.json();

        if (result.candidates && result.candidates.length > 0 &&
            result.candidates[0].content && result.candidates[0].content.parts &&
            result.candidates[0].content.parts.length > 0) {
          const text = result.candidates[0].content.parts[0].text;
          responseDiv.textContent = text;
        } else {
          responseDiv.textContent = translations[currentLanguage]["ai-error"];
          console.error("Estructura de respuesta inesperada del LLM:", result);
        }
      } catch (error) {
        responseDiv.textContent = translations[currentLanguage]["ai-error"];
        console.error("Error al llamar a la API de Gemini:", error);
      } finally {
        button.disabled = false;
        loadingIndicator.style.display = 'none';
      }
    }

    // Inicialización de la página al cargar el DOM
    document.addEventListener('DOMContentLoaded', function() {
      // Carga las preferencias de idioma y moneda desde localStorage
      const idiomaGuardado = localStorage.getItem('idiomaPreferido');
      const monedaGuardada = localStorage.getItem('monedaPreferida');

      // Aplica el idioma guardado o 'es' por defecto
      translatePage(idiomaGuardado || 'es');
      // Aplica la moneda guardada o 'ARS' por defecto
      cambiarMoneda(monedaGuardada || 'ARS');

      // Asocia los eventos click a los botones de IA
      document.getElementById('generate-menu-btn').addEventListener('click', () =>
        callGeminiAPI('ai-menu-prompt', 'ai-menu-response', 'generate-menu-btn', 'ai-menu-loading-indicator')
      );
      document.getElementById('generate-accommodation-btn').addEventListener('click', () =>
        callGeminiAPI('ai-accommodation-prompt', 'ai-accommodation-response', 'generate-accommodation-btn', 'ai-accommodation-loading-indicator')
      );
      document.getElementById('generate-family-tips-btn').addEventListener('click', () =>
        callGeminiAPI('ai-family-tips-prompt', 'ai-family-tips-response', 'generate-family-tips-btn', 'ai-family-tips-loading-indicator')
      );
      document.getElementById('generate-budget-btn').addEventListener('click', () =>
        callGeminiAPI('ai-budget-prompt', 'ai-budget-response', 'generate-budget-btn', 'ai-budget-loading-indicator')
      );
    });
  </script>
</body>
</html>
